# 套餐重构分析报告

生成时间: 2025-12-03

## 📊 现有数据概况

### 套餐总体情况
- **总套餐数**: 93个
- **活跃套餐**: 91个
- **活动套餐**: 8个
- **精选套餐**: 4个

### 按类别分布
| 类别 | 数量 | 占比 |
|------|------|------|
| LADIES | 31 | 33.3% |
| SPECIAL | 24 | 25.8% |
| MENS | 15 | 16.1% |
| COUPLE | 9 | 9.7% |
| FAMILY | 9 | 9.7% |
| GROUP | 5 | 5.4% |

### 价格分析
- **最低价**: ¥100
- **最高价**: ¥36,000
- **平均价**: ¥3,240

### 标签体系现状
- **总标签数**: 仅7个 ❗️
- **分类**:
  - 服务等级 (3个): 经济实惠、标准套餐、豪华尊享
  - 使用场景 (4个): 街拍漫步、寺庙参拜、浪漫约会、专业写真
- **无标签套餐**: 78个 (占83.9%) ⚠️

### 主题系统现状
- **总主题数**: 6个
  - 潮流出片 (3个套餐)
  - 盛大礼遇 (3个套餐)
  - 亲友同行 (4个套餐)
  - 季节限定 (4个套餐)
  - 特色套餐 (3个套餐)
  - 轻装漫步 (0个套餐 - 未使用)

## ⚠️ 主要问题

### 1. 严重的套餐重复问题
**重复名称套餐**: 15组，共30+个套餐

示例:
- "男士和服" x3
- "豪华成人礼振袖(含发型)" x3
- "情侣优惠方案(含发型)网站支付限定" x2
- "访问着(含发型)" x2

**原因分析**:
- 多店铺独立创建相同套餐
- 缺乏统一的套餐模板
- 没有跨店铺共享机制

### 2. 标签体系严重不足
**现状**: 仅7个标签，83.9%的套餐无标签

**问题**:
- 用户无法有效筛选套餐
- 缺乏个性化推荐基础
- 搜索体验差

### 3. 命名不规范
**问题示例**:
- "旗舰店访问着+30min摄影|10周年优惠,不可退款"
- "京都雅訪問着2人同行第二人半价|10周年优惠,不可退款"
- "和洋蕾丝和服双人套餐|10周年优惠,不可退款,浅草站前店"

**问题**:
- 名称混入促销信息
- 名称混入店铺信息
- 用户体验差,不符合产品设计哲学

### 4. 价格分布混乱
- 最低¥100,最高¥36,000,跨度过大
- 缺乏明确的价格梯度
- 用户决策困难

---

## 🎯 新方案对比

### 新标签体系 (57个标签)
基于CSV文件 `标签体系.csv`:

| 维度 | 标签数量 | 自动化程度 |
|------|---------|----------|
| 👥 人群 | 10 | 全自动 |
| 🎆 场景 | 7 | 部分手动 |
| 💎 风格 | 5 | 手动 |
| 📦 服务 | 10 | 大部分自动 |
| 💰 营销 | 9 | 部分手动 |
| 🏷️ 季节 | 5 | 自动 |
| 📍 地理 | 3 | 自动 |
| ⭐ 认证 | 5 | 需审核 |
| 🛎️ 便利 | 3 | 自动 |

**优势**:
1. 覆盖全面,从人群到场景到服务
2. 自动化程度高,减少人工维护
3. 支持筛选和推荐
4. 明确标识需认证标签(防止滥用)

### 新套餐体系 (21个套餐)
基于CSV文件 `套餐实例清单.csv`:

#### 按主题分组 (SOL系统)
| 主题 | 套餐数 | 价格区间 |
|------|--------|---------|
| SOL-01 出片神器 | 3 | ¥9,800 - ¥35,800 |
| SOL-02 正式礼遇 | 4 | ¥28,000 - ¥45,000 |
| SOL-03 双人优享 | 3 | ¥14,800 - ¥22,800 |
| SOL-04 季节限定 | 4 | ¥6,800 - ¥12,800 |
| SOL-05 超值入门 | 4 | ¥3,980 - ¥5,800 |
| 特殊套餐 | 2 | 定制报价 |

#### 套餐层级策略
- **基础版** → **豪华版** → **终极版** (明确升级路径)
- 每个主题3-4个套餐(避免选择困难)
- 价格梯度清晰

**命名规范**:
- 主标题:功能导向(如"经典和风·五款发型任选")
- 副标题:解释目标用户(如"轻奢畅选方案")
- 去除促销和店铺信息

---

## 📋 重构方案

### 方案A: 完全替换 (推荐) ⭐
**操作**:
1. 备份现有93个套餐到JSON
2. 禁用(isActive=false)所有现有套餐
3. 导入新的57个标签
4. 导入新的21个套餐
5. 关联套餐和标签

**优势**:
- 彻底解决命名和重复问题
- 建立规范的标签体系
- 简化用户选择(93 → 21)

**风险**:
- 现有预订关联需保留
- 需通知商家新套餐体系
- 需更新前端展示

**时间**: 2-3小时

---

### 方案B: 渐进式合并
**操作**:
1. 导入新标签体系(57个)
2. 识别并合并重复套餐(93 → ~60)
3. 为现有套餐补充标签
4. 逐步禁用冗余套餐
5. 补充新套餐填补空白

**优势**:
- 对现有系统冲击小
- 可以分批次执行

**劣势**:
- 无法彻底解决命名问题
- 仍保留部分历史包袱
- 耗时更长

**时间**: 4-6小时

---

## 🎯 推荐方案详情

### 执行步骤 (方案A)

#### 第一阶段:准备与备份 (30min)
1. ✅ 导出现有93个套餐到 `backup/plans-backup-2025-12-03.json`
2. ✅ 导出现有7个标签和2个分类
3. ✅ 创建数据迁移脚本

#### 第二阶段:标签体系重构 (1h)
1. 创建9个标签分类(人群、场景、风格等)
2. 导入57个标签
3. 配置自动化规则(如"#情侣"自动关联COUPLE类套餐)

#### 第三阶段:套餐重构 (1h)
1. 将现有套餐标记为isActive=false(保留数据)
2. 创建6个主题(Theme):
   - SOL-01 出片神器
   - SOL-02 正式礼遇
   - SOL-03 双人优享
   - SOL-04 季节限定
   - SOL-05 超值入门
   - 特殊套餐
3. 导入21个新套餐
4. 关联套餐与标签(基于CSV的"平台标签"和"可选标签")

#### 第四阶段:数据验证 (30min)
1. 验证所有套餐都有至少2个标签
2. 验证价格梯度合理
3. 验证主题关联正确
4. 运行分析脚本确认数据完整性

---

## 💡 关键设计理念对照

### CLAUDE.md 设计哲学
> "选择困难 <-- 设计标准化套餐"
> "游客没有时间、精力和耐性去筛选和定制和服套餐"

### 现状问题
- ❌ 93个套餐 → 选择过载
- ❌ 15组重复 → 无效选项
- ❌ 83%无标签 → 无法筛选

### 新方案优势
- ✅ 21个套餐 → 精选核心方案
- ✅ 57个标签 → 智能筛选
- ✅ 主题分组 → 场景导向
- ✅ 三级梯度 → 明确升级路径

---

## 📊 数据映射示例

### 示例1: PKG-S01-A 经典和风
**CSV数据**:
```
套餐名称: 经典和风·五款发型任选(轻奢畅选方案)
建议售价: ¥9,800
平台标签: #含发型 #全场任选 #中文服务
可选标签: #出片神器 #时尚新潮 #复古经典
包含服务: 和服全套(小纹/蕾丝任选)+发型设计(5款可选)+基础腰带
```

**数据库结构**:
```typescript
{
  name: "经典和风·五款发型任选",
  description: "轻奢畅选方案",
  category: "LADIES",
  price: 980000, // 分为单位
  duration: 480, // 8小时
  includes: [
    "和服全套(小纹/蕾丝任选)",
    "发型设计(5款可选)",
    "基础腰带"
  ],
  themeId: "SOL-01出片神器",
  planTags: [
    { tagCode: "hair-styling" }, // #含发型
    { tagCode: "unlimited-selection" }, // #全场任选
    { tagCode: "chinese-service" }, // #中文服务
    { tagCode: "photo-ready" }, // #出片神器
    { tagCode: "trendy" }, // #时尚新潮
    { tagCode: "vintage-classic" } // #复古经典
  ]
}
```

---

## ⏭️ 下一步行动

### 立即执行
1. [ ] 用户确认重构方案(A或B)
2. [ ] 创建标签导入脚本
3. [ ] 创建套餐导入脚本
4. [ ] 运行备份

### 执行后
1. [ ] 更新前端筛选组件
2. [ ] 更新商家文档
3. [ ] 创建套餐模板供商家使用

---

## 📝 注意事项

### 数据保留
- ✅ 保留所有现有Booking和BookingItem关联
- ✅ 保留套餐数据(仅标记isActive=false)
- ✅ 可随时回滚

### 兼容性
- ⚠️ 前端需适配新标签体系
- ⚠️ 搜索逻辑需更新
- ⚠️ 筛选器需重新设计

### 商家影响
- 📢 需通知商家新套餐体系
- 📢 提供迁移指南
- 📢 可选:允许商家自定义标签
