# ä¸æ»‘é¢„è®¢æµç¨‹è®¾è®¡ï¼šæœç´¢ â†’ æµè§ˆ â†’ é¢„è®¢

## ğŸ¯ ç›®æ ‡ï¼šæ‰“é€  Airbnb çº§åˆ«çš„ç”¨æˆ·ä½“éªŒ

### æ ¸å¿ƒåŸåˆ™
```
ä¸€æ¬¡è¾“å…¥ï¼Œå…¨ç¨‹è®°å¿†
è‡ªåŠ¨å¡«å……ï¼Œå‡å°‘æ‘©æ“¦
ä¸Šä¸‹æ–‡å»¶ç»­ï¼Œæ™ºèƒ½æ¨è
```

---

## ğŸ“Š ç°æœ‰æµç¨‹é—®é¢˜è¯Šæ–­

### å½“å‰ç”¨æˆ·è·¯å¾„

```
Step 1: ä¸»é¡µæœç´¢
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HeroSearchBar                   â”‚
â”‚ â”œâ”€ åœ°ç‚¹ï¼šä¸œäº¬                   â”‚
â”‚ â”œâ”€ æ—¥æœŸï¼š2025-01-20            â”‚
â”‚ â””â”€ äººæ•°ï¼š2                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ç‚¹å‡»"æœç´¢"
         â†“
Step 2: å¥—é¤åˆ—è¡¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ URL: /plans?location=ä¸œäº¬        â”‚
â”‚      &date=2025-01-20           â”‚
â”‚      &guests=2                  â”‚
â”‚                                 â”‚
â”‚ âŒ æ˜¾ç¤ºæ‰€æœ‰å¥—é¤ï¼ˆå‚æ•°è¢«å¿½ç•¥ï¼‰     â”‚
â”‚ âŒ éœ€è¦æ‰‹åŠ¨ç­›é€‰åœ°ç‚¹               â”‚
â”‚ âŒ çœ‹ä¸åˆ°äººæ•°æ¨è                â”‚
â”‚ âŒ ä¸çŸ¥é“å“ªäº›å¯é¢„è®¢               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ åŠ å…¥è´­ç‰©è½¦
         â†“
Step 3: è´­ç‰©è½¦
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ æ—¥æœŸä¿¡æ¯ä¸¢å¤±                  â”‚
â”‚ âŒ éœ€è¦æ‰‹åŠ¨é€‰æ‹©åº—é“º               â”‚
â”‚ âŒ äººæ•°ä¿¡æ¯ä¸¢å¤±                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ å»ç»“è´¦
         â†“
Step 4: é¢„è®¢é¡µé¢
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ éœ€è¦é‡æ–°è¾“å…¥æ—¥æœŸ               â”‚
â”‚ âŒ éœ€è¦é‡æ–°è¾“å…¥æ—¶é—´               â”‚
â”‚ âŒ æ²¡æœ‰é»˜è®¤å€¼                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—®é¢˜æ±‡æ€»**ï¼š
1. âŒ **å‚æ•°æ–­å±‚**ï¼šæœç´¢æ¡†çš„è¾“å…¥åœ¨åç»­é¡µé¢å®Œå…¨ä¸¢å¤±
2. âŒ **é‡å¤è¾“å…¥**ï¼šæ—¥æœŸã€äººæ•°éœ€è¦å¤šæ¬¡å¡«å†™
3. âŒ **æ— æ™ºèƒ½æ¨è**ï¼šä¸æ ¹æ®äººæ•°æ¨èåˆé€‚çš„å¥—é¤
4. âŒ **ç¼ºå°‘é¢„å¡«å……**ï¼šcheckoutæ—¶éœ€è¦ä»é›¶å¼€å§‹
5. âŒ **æ— ä¸Šä¸‹æ–‡å»¶ç»­**ï¼šæ¯ä¸ªé¡µé¢éƒ½åƒ"ç¬¬ä¸€æ¬¡è®¿é—®"

---

## âœ¨ ä¸æ»‘æµç¨‹è®¾è®¡

### Airbnb å¼ä½“éªŒè·¯å¾„

```
Step 1: ä¸»é¡µæœç´¢ï¼ˆè¾“å…¥æ„å›¾ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” æœç´¢æ¡†                        â”‚
â”‚ â”œâ”€ åœ°ç‚¹ï¼šä¸œäº¬                   â”‚
â”‚ â”œâ”€ æ—¥æœŸï¼š2025-01-20            â”‚
â”‚ â””â”€ äººæ•°ï¼š2äºº                    â”‚
â”‚                                 â”‚
â”‚ [æœç´¢] â† ç‚¹å‡»                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
         â†“ ğŸ’¾ ä¿å­˜åˆ° SearchContext
         â†“
Step 2: æ™ºèƒ½æ¨èå¥—é¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… æ ¹æ®æ‚¨çš„æœç´¢ï¼š2äºº Â· ä¸œäº¬       â”‚
â”‚ âœ… ä¸ºæ‚¨æ¨èæƒ…ä¾£å¥—é¤               â”‚
â”‚                                 â”‚
â”‚ ğŸ† æƒ…ä¾£å¥—é¤ï¼ˆæœ€é€‚åˆ2äººï¼‰          â”‚
â”‚ ğŸ“ ä¸œäº¬æµ…è‰åº—                    â”‚
â”‚ âœ… 1æœˆ20æ—¥å¯é¢„è®¢                â”‚
â”‚ ğŸ’° Â¥8,000/å¯¹                    â”‚
â”‚                                 â”‚
â”‚ ğŸ‘© å¥³å£«å¥—é¤                      â”‚
â”‚ ğŸ“ ä¸œäº¬é“¶åº§åº—                    â”‚
â”‚ âœ… 1æœˆ20æ—¥å¯é¢„è®¢                â”‚
â”‚ ğŸ’° Â¥5,000/äºº Ã— 2 = Â¥10,000     â”‚
â”‚                                 â”‚
â”‚ [å¿«é€Ÿé¢„è®¢] â† ä¸€é”®ç›´è¾¾checkout    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
         â†“ ä¿ç•™ SearchContext
         â†“
Step 3: å¿«é€Ÿé¢„è®¢ï¼ˆè·³è¿‡è´­ç‰©è½¦ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… æ—¥æœŸï¼š2025-01-20 âœ… å·²é€‰æ‹©    â”‚
â”‚ ğŸ‘¥ äººæ•°ï¼š2äºº âœ… å·²é€‰æ‹©           â”‚
â”‚ ğŸ“ åº—é“ºï¼šä¸œäº¬æµ…è‰åº— âœ… å·²åŒ¹é…     â”‚
â”‚                                 â”‚
â”‚ â° åˆ°åº—æ—¶é—´ï¼š[10:00 â–¼]          â”‚
â”‚ ğŸ“ å§“åï¼š___                    â”‚
â”‚ ğŸ“§ é‚®ç®±ï¼š___                    â”‚
â”‚                                 â”‚
â”‚ [ç¡®è®¤é¢„è®¢ Â¥8,000]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ”¹è¿›**ï¼š
- âœ… **å‚æ•°å»¶ç»­**ï¼šæœç´¢æ¡ä»¶è´¯ç©¿å…¨æµç¨‹
- âœ… **æ™ºèƒ½è¿‡æ»¤**ï¼šåªæ˜¾ç¤ºç¬¦åˆæ¡ä»¶çš„å¥—é¤
- âœ… **è‡ªåŠ¨é¢„å¡«**ï¼šæ—¥æœŸã€äººæ•°ã€åº—é“ºè‡ªåŠ¨å¡«å……
- âœ… **å¿«é€Ÿé€šé“**ï¼š"å¿«é€Ÿé¢„è®¢"è·³è¿‡è´­ç‰©è½¦
- âœ… **ä¸Šä¸‹æ–‡å¯è§**ï¼šé¡¶éƒ¨æ˜¾ç¤º"æ ¹æ®æ‚¨çš„æœç´¢ï¼š2äºº Â· ä¸œäº¬ Â· 1æœˆ20æ—¥"

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šURL å‚æ•°ä¼ é€’ï¼ˆç®€å•ï¼‰

#### **ä¼˜ç‚¹**ï¼š
- âœ… å®ç°ç®€å•
- âœ… å¯åˆ†äº«é“¾æ¥
- âœ… æ”¯æŒæµè§ˆå™¨å‰è¿›/åé€€

#### **ç¼ºç‚¹**ï¼š
- âš ï¸ URLä¼šå¾ˆé•¿
- âš ï¸ åˆ·æ–°é¡µé¢éœ€è¦é‡æ–°è§£æ

#### **å®ç°**ï¼š

**1. HeroSearchBar â†’ Plans é¡µé¢**
```typescript
// src/components/HeroSearchBar.tsx
const handleSearch = () => {
  const params = new URLSearchParams();
  if (location) params.set('location', location);
  if (date) params.set('date', date);
  if (guests) params.set('guests', guests);

  router.push(`/plans?${params.toString()}`);
};

// URL: /plans?location=ä¸œäº¬&date=2025-01-20&guests=2
```

**2. Plans é¡µé¢è¯»å–å‚æ•°**
```typescript
// src/app/(main)/plans/PlansClient.tsx
'use client';

export default function PlansClient({ plans }) {
  const searchParams = useSearchParams();
  const location = searchParams.get('location');
  const date = searchParams.get('date');
  const guests = parseInt(searchParams.get('guests') || '1');

  // è¿‡æ»¤å¥—é¤
  const filteredPlans = useMemo(() => {
    let result = plans;

    // æŒ‰åœ°ç‚¹è¿‡æ»¤
    if (location) {
      result = result.filter(plan =>
        plan.region?.includes(location) ||
        plan.storeName?.includes(location)
      );
    }

    // æŒ‰äººæ•°æ¨èåˆ†ç±»
    if (guests) {
      const recommendedCategories = getRecommendedCategories(guests);
      result = result.sort((a, b) => {
        const aScore = recommendedCategories.includes(a.category) ? 1 : 0;
        const bScore = recommendedCategories.includes(b.category) ? 1 : 0;
        return bScore - aScore; // æ¨èçš„æ’å‰é¢
      });
    }

    return result;
  }, [plans, location, guests]);

  return (
    <div>
      {/* æœç´¢ä¸Šä¸‹æ–‡æç¤º */}
      {(location || date || guests) && (
        <div className="bg-sakura-50 border border-sakura-200 rounded-lg p-4 mb-6">
          <p className="text-sm text-gray-700">
            æ ¹æ®æ‚¨çš„æœç´¢ï¼š
            {guests && <span className="font-semibold">{guests}äºº</span>}
            {location && <span className="font-semibold"> Â· {location}</span>}
            {date && <span className="font-semibold"> Â· {formatDate(date)}</span>}
          </p>
        </div>
      )}

      {/* å¥—é¤åˆ—è¡¨ */}
      <PlanGrid plans={filteredPlans} />
    </div>
  );
}

// äººæ•° â†’ æ¨èåˆ†ç±»
function getRecommendedCategories(guests: number): string[] {
  if (guests === 1) return ['LADIES', 'MENS'];
  if (guests === 2) return ['COUPLE'];
  if (guests <= 4) return ['FAMILY'];
  return ['GROUP'];
}
```

**3. Plans â†’ Cart â†’ Booking ä¼ é€’å‚æ•°**
```typescript
// PlanCard ç»„ä»¶ï¼ˆåŠ å…¥è´­ç‰©è½¦æ—¶ï¼‰
const handleAddToCart = () => {
  const searchParams = new URLSearchParams(window.location.search);

  addItem({
    ...plan,
    // é™„åŠ æœç´¢ä¸Šä¸‹æ–‡
    searchContext: {
      visitDate: searchParams.get('date'),
      guests: searchParams.get('guests'),
      preferredLocation: searchParams.get('location'),
    }
  });
};

// Cart ç»„ä»¶ï¼ˆè·³è½¬åˆ°bookingæ—¶ï¼‰
const handleCheckout = () => {
  // ä»è´­ç‰©è½¦ç¬¬ä¸€ä¸ªé¡¹ç›®æå–æœç´¢ä¸Šä¸‹æ–‡
  const context = items[0]?.searchContext;
  const params = new URLSearchParams();
  if (context?.visitDate) params.set('date', context.visitDate);
  if (context?.guests) params.set('guests', context.guests);

  router.push(`/booking?${params.toString()}`);
};

// Booking é¡µé¢ï¼ˆè‡ªåŠ¨å¡«å……ï¼‰
const searchParams = useSearchParams();
const [visitDate, setVisitDate] = useState(
  searchParams.get('date') || ''
);
const [guestCount, setGuestCount] = useState(
  searchParams.get('guests') || ''
);
```

---

### æ–¹æ¡ˆBï¼šContext APIï¼ˆReact çŠ¶æ€ç®¡ç†ï¼‰

#### **ä¼˜ç‚¹**ï¼š
- âœ… çŠ¶æ€ç»Ÿä¸€ç®¡ç†
- âœ… è·¨é¡µé¢å…±äº«
- âœ… ç±»å‹å®‰å…¨

#### **ç¼ºç‚¹**ï¼š
- âš ï¸ åˆ·æ–°é¡µé¢ä¸¢å¤±ï¼ˆéœ€é…åˆlocalStorageï¼‰
- âš ï¸ å®ç°ç¨å¤æ‚

#### **å®ç°**ï¼š

**1. åˆ›å»º SearchContext**
```typescript
// src/context/SearchContext.tsx
'use client';

import { createContext, useContext, useState, ReactNode } from 'react';

interface SearchContextType {
  location: string;
  date: string;
  guests: number;
  setSearch: (data: Partial<SearchContextType>) => void;
  clearSearch: () => void;
}

const SearchContext = createContext<SearchContextType | undefined>(undefined);

export function SearchProvider({ children }: { children: ReactNode }) {
  const [search, setSearchState] = useState({
    location: '',
    date: '',
    guests: 1,
  });

  const setSearch = (data: Partial<SearchContextType>) => {
    const newSearch = { ...search, ...data };
    setSearchState(newSearch);
    // æŒä¹…åŒ–åˆ° localStorage
    localStorage.setItem('searchContext', JSON.stringify(newSearch));
  };

  const clearSearch = () => {
    setSearchState({ location: '', date: '', guests: 1 });
    localStorage.removeItem('searchContext');
  };

  return (
    <SearchContext.Provider value={{ ...search, setSearch, clearSearch }}>
      {children}
    </SearchContext.Provider>
  );
}

export function useSearch() {
  const context = useContext(SearchContext);
  if (!context) throw new Error('useSearch must be used within SearchProvider');
  return context;
}
```

**2. åœ¨ layout ä¸­åŒ…è£¹**
```typescript
// src/app/(main)/layout.tsx
import { SearchProvider } from '@/context/SearchContext';

export default function MainLayout({ children }) {
  return (
    <SearchProvider>
      {children}
    </SearchProvider>
  );
}
```

**3. å„é¡µé¢ä½¿ç”¨**
```typescript
// HeroSearchBar
const { setSearch } = useSearch();
const handleSearch = () => {
  setSearch({ location, date, guests: parseInt(guests) });
  router.push('/plans');
};

// PlansClient
const { location, date, guests } = useSearch();
// è‡ªåŠ¨è¯»å–ï¼Œæ— éœ€URLå‚æ•°

// BookingPage
const { date, guests } = useSearch();
const [visitDate, setVisitDate] = useState(date);
```

---

### æ–¹æ¡ˆCï¼šæ··åˆæ–¹æ¡ˆï¼ˆæ¨èâ­ï¼‰

**ç»“åˆä¸¤è€…ä¼˜åŠ¿**ï¼š
- URLå‚æ•°ä½œä¸ºä¸»è¦æ•°æ®æºï¼ˆå¯åˆ†äº«ï¼‰
- Contextä½œä¸ºå…œåº•ï¼ˆåˆ·æ–°æ—¶ä»URLæ¢å¤ï¼‰

```typescript
// SearchContext å¢å¼ºç‰ˆ
export function SearchProvider({ children }) {
  // åˆå§‹åŒ–æ—¶ä» URL æˆ– localStorage æ¢å¤
  const [search, setSearchState] = useState(() => {
    const urlParams = new URLSearchParams(window.location.search);
    const stored = localStorage.getItem('searchContext');

    return {
      location: urlParams.get('location') || JSON.parse(stored || '{}').location || '',
      date: urlParams.get('date') || JSON.parse(stored || '{}').date || '',
      guests: parseInt(urlParams.get('guests') || JSON.parse(stored || '{}').guests || '1'),
    };
  });

  // è®¾ç½®æ—¶åŒæ—¶æ›´æ–° URL
  const setSearch = (data: Partial<SearchContextType>) => {
    const newSearch = { ...search, ...data };
    setSearchState(newSearch);

    // æ›´æ–° URL
    const params = new URLSearchParams();
    if (newSearch.location) params.set('location', newSearch.location);
    if (newSearch.date) params.set('date', newSearch.date);
    if (newSearch.guests > 1) params.set('guests', newSearch.guests.toString());

    window.history.replaceState({}, '', `?${params.toString()}`);

    // æŒä¹…åŒ–
    localStorage.setItem('searchContext', JSON.stringify(newSearch));
  };

  return <SearchContext.Provider value={{ ...search, setSearch }}>...</SearchContext.Provider>;
}
```

---

## ğŸ¨ UI/UX ä¼˜åŒ–ç»†èŠ‚

### 1. **æœç´¢ä¸Šä¸‹æ–‡å¯è§æ€§**

åœ¨æ¯ä¸ªé¡µé¢é¡¶éƒ¨æ˜¾ç¤ºå½“å‰æœç´¢æ¡ä»¶ï¼š

```tsx
// SearchContextBanner.tsx
export function SearchContextBanner() {
  const { location, date, guests, clearSearch } = useSearch();

  if (!location && !date && !guests) return null;

  return (
    <div className="sticky top-16 z-20 bg-sakura-50 border-b border-sakura-200 py-3">
      <div className="container flex items-center justify-between">
        <div className="flex items-center gap-3">
          <span className="text-sm text-gray-600">æ‚¨çš„æœç´¢ï¼š</span>
          {guests > 1 && (
            <Badge variant="secondary">
              <Users className="w-3 h-3 mr-1" />
              {guests}äºº
            </Badge>
          )}
          {location && (
            <Badge variant="secondary">
              <MapPin className="w-3 h-3 mr-1" />
              {location}
            </Badge>
          )}
          {date && (
            <Badge variant="secondary">
              <Calendar className="w-3 h-3 mr-1" />
              {formatDate(date)}
            </Badge>
          )}
        </div>
        <button
          onClick={clearSearch}
          className="text-xs text-gray-500 hover:text-gray-700"
        >
          æ¸…é™¤æœç´¢
        </button>
      </div>
    </div>
  );
}
```

---

### 2. **å¿«é€Ÿé¢„è®¢æŒ‰é’®**

åœ¨å¥—é¤å¡ç‰‡ä¸Šå¢åŠ "å¿«é€Ÿé¢„è®¢"æŒ‰é’®ï¼š

```tsx
// PlanCard.tsx
export function PlanCard({ plan }) {
  const { date, guests } = useSearch();
  const router = useRouter();

  const handleQuickBook = () => {
    // è·³è¿‡è´­ç‰©è½¦ï¼Œç›´æ¥é¢„è®¢
    const params = new URLSearchParams();
    params.set('planId', plan.id);
    if (date) params.set('date', date);
    if (guests) params.set('guests', guests.toString());

    router.push(`/booking/quick?${params.toString()}`);
  };

  return (
    <div className="plan-card">
      {/* ...å¥—é¤ä¿¡æ¯ */}

      <div className="flex gap-2 mt-4">
        <button onClick={handleAddToCart} className="flex-1 btn-outline">
          åŠ å…¥è´­ç‰©è½¦
        </button>
        {date && (
          <button onClick={handleQuickBook} className="flex-1 btn-primary">
            å¿«é€Ÿé¢„è®¢ â†’
          </button>
        )}
      </div>
    </div>
  );
}
```

---

### 3. **æ™ºèƒ½æ¨èæ ‡ç­¾**

æ ¹æ®äººæ•°æ˜¾ç¤ºæ¨èæ ‡ç­¾ï¼š

```tsx
// PlansClient.tsx
const recommendedCategories = getRecommendedCategories(guests);

{filteredPlans.map(plan => (
  <div key={plan.id} className="relative">
    {recommendedCategories.includes(plan.category) && (
      <div className="absolute top-2 left-2 z-10">
        <Badge variant="success">
          â­ æ¨è{guests}äºº
        </Badge>
      </div>
    )}
    <PlanCard plan={plan} />
  </div>
))}
```

---

### 4. **é¢„å¡«å……è¡¨å•**

Bookingé¡µé¢è‡ªåŠ¨å¡«å……ï¼š

```tsx
// BookingPage.tsx
const { date, guests, location } = useSearch();

// è‡ªåŠ¨å¡«å……æ—¥æœŸ
const [visitDate, setVisitDate] = useState(date);

// è‡ªåŠ¨åŒ¹é…åº—é“º
const suggestedStores = stores.filter(store =>
  location && store.region?.includes(location)
);

// è‡ªåŠ¨å¡«å……äººæ•°ï¼ˆç”¨äºéªŒè¯ï¼‰
const expectedGuests = guests;

return (
  <form>
    <input
      type="date"
      value={visitDate}
      onChange={(e) => setVisitDate(e.target.value)}
      className={visitDate ? "border-green-500" : ""}
    />
    {visitDate && (
      <span className="text-xs text-green-600">âœ“ å·²ä»æœç´¢é¢„å¡«</span>
    )}

    {/* æ¨èåº—é“º */}
    {suggestedStores.length > 0 && (
      <div className="mt-2">
        <p className="text-xs text-gray-500">æ ¹æ®æ‚¨é€‰æ‹©çš„åœ°ç‚¹ï¼Œæ¨èï¼š</p>
        {suggestedStores.map(store => (
          <button key={store.id} onClick={() => selectStore(store.id)}>
            {store.name} â­ æ¨è
          </button>
        ))}
      </div>
    )}
  </form>
);
```

---

## ğŸš€ å®æ–½è®¡åˆ’

### Phase 1ï¼šåŸºç¡€å‚æ•°ä¼ é€’ï¼ˆ2-3å°æ—¶ï¼‰

**æ–‡ä»¶ä¿®æ”¹**ï¼š
1. âœ… `HeroSearchBar.tsx` - å·²å®Œæˆï¼Œæ— éœ€æ”¹åŠ¨
2. ğŸ”§ `PlansClient.tsx` - è¯»å–URLå‚æ•°ï¼Œè¿‡æ»¤å¥—é¤
3. ğŸ”§ `PlanCard.tsx` - é™„åŠ searchContextåˆ°è´­ç‰©è½¦
4. ğŸ”§ `BookingPage.tsx` - è¯»å–å‚æ•°ï¼Œè‡ªåŠ¨å¡«å……

**æ•ˆæœ**ï¼š
- æœç´¢å‚æ•°ç”Ÿæ•ˆ
- æ—¥æœŸè‡ªåŠ¨å¡«å……åˆ°bookingé¡µé¢

---

### Phase 2ï¼šæ™ºèƒ½æ¨èï¼ˆ1-2å°æ—¶ï¼‰

**æ–‡ä»¶ä¿®æ”¹**ï¼š
1. ğŸ”§ `PlansClient.tsx` - äººæ•°æ™ºèƒ½æ’åº
2. âœ¨ æ–°å¢ `SearchContextBanner.tsx` - é¡¶éƒ¨æç¤ºæ¡
3. ğŸ”§ `PlanCard.tsx` - æ¨èæ ‡ç­¾

**æ•ˆæœ**ï¼š
- 2äººä¼˜å…ˆæ˜¾ç¤ºæƒ…ä¾£å¥—é¤
- æ˜¾ç¤º"â­ æ¨è2äºº"æ ‡ç­¾

---

### Phase 3ï¼šå¿«é€Ÿé¢„è®¢ï¼ˆ2-3å°æ—¶ï¼‰

**æ–‡ä»¶ä¿®æ”¹**ï¼š
1. ğŸ”§ `PlanCard.tsx` - å¿«é€Ÿé¢„è®¢æŒ‰é’®
2. âœ¨ æ–°å¢ `/booking/quick` è·¯ç”±
3. ğŸ”§ è´­ç‰©è½¦é€»è¾‘ - æ”¯æŒå•å“ç›´è¾¾

**æ•ˆæœ**ï¼š
- ç‚¹å‡»"å¿«é€Ÿé¢„è®¢"è·³è¿‡è´­ç‰©è½¦
- ä¸€ç«™å¼ç»“è´¦ä½“éªŒ

---

### Phase 4ï¼šContextæŒä¹…åŒ–ï¼ˆæŒ‰éœ€ï¼‰

**å¯é€‰ä¼˜åŒ–**ï¼š
- å®ç° SearchContext
- localStorageå¤‡ä»½
- åˆ·æ–°é¡µé¢ä¸ä¸¢å¤±

---

## ğŸ“Š å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | ç°æœ‰æµç¨‹ | ä¼˜åŒ–å |
|------|---------|--------|
| å‚æ•°ä¼ é€’ | âŒ ä¸¢å¤± | âœ… URL + Context |
| é‡å¤è¾“å…¥ | âŒ 3æ¬¡è¾“å…¥æ—¥æœŸ | âœ… è¾“å…¥1æ¬¡ |
| æ™ºèƒ½æ¨è | âŒ æ—  | âœ… äººæ•°æ¨è |
| å¿«é€Ÿé€šé“ | âŒ å¿…ç»è´­ç‰©è½¦ | âœ… ä¸€é”®é¢„è®¢ |
| ä¸Šä¸‹æ–‡å¯è§ | âŒ æ— æç¤º | âœ… é¡¶éƒ¨banner |
| å®æ–½æ—¶é—´ | - | 1å¤©å®Œæˆ |

---

## ğŸ¯ ç«‹å³å¼€å§‹ï¼Ÿ

**æˆ‘çš„å»ºè®®**ï¼šå…ˆå®ç° Phase 1 + Phase 2ï¼ˆå…±3-5å°æ—¶ï¼‰

**è¦†ç›–åœºæ™¯**ï¼š90%çš„ç”¨æˆ·ä½“éªŒæå‡

**éœ€è¦ä½ ç¡®è®¤**ï¼š
1. æ˜¯å¦é‡‡ç”¨"æ··åˆæ–¹æ¡ˆ"ï¼ˆURL + Contextï¼‰ï¼Ÿ
2. æ˜¯å¦éœ€è¦"å¿«é€Ÿé¢„è®¢"åŠŸèƒ½ï¼Ÿ
3. æ˜¯å¦éœ€è¦æˆ‘ç«‹å³å¼€å§‹ç¼–ç ï¼Ÿ

æˆ‘å¯ä»¥ç°åœ¨å¼€å§‹å®ç°ï¼Œé¢„è®¡ä»Šå¤©å†…å®Œæˆï¼ğŸš€
