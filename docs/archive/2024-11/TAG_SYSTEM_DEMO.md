# æ ‡ç­¾ç³»ç»Ÿ Demo å¿«é€ŸæŒ‡å—

> **ç›®æ ‡**: 5åˆ†é’Ÿå†…æ¼”ç¤ºå®Œæ•´çš„æ ‡ç­¾ç®¡ç†æµç¨‹
> **æ¼”ç¤ºæµç¨‹**: ç®¡ç†å‘˜æ·»åŠ æ ‡ç­¾ â†’ å•†å®¶ä¿®æ”¹å¥—é¤ â†’ æ¸¸å®¢çœ‹åˆ°æ–°æ ‡ç­¾

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯å¹¶è¿è¡Œè¿ç§»
pnpm prisma generate
pnpm prisma db push
```

### 2. åˆå§‹åŒ–æ ‡ç­¾æ•°æ®

```bash
# åˆ›å»ºç¤ºä¾‹æ ‡ç­¾åˆ†ç±»å’Œæ ‡ç­¾
pnpm tsx scripts/seed-tags-demo.ts
```

è¿™å°†åˆ›å»º:
- **3ä¸ªæ ‡ç­¾åˆ†ç±»**: ä½¿ç”¨åœºæ™¯ã€ä»·æ ¼åŒºé—´ã€æœåŠ¡ç­‰çº§
- **10ä¸ªæ ‡ç­¾**: è¡—æ‹æ¼«æ­¥ã€å¯ºåº™å‚æ‹œã€çº¦ä¼šç­‰
- **è‡ªåŠ¨ä¸ºå‰10ä¸ªå¥—é¤æ·»åŠ æ ‡ç­¾**

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

---

## ğŸ¬ Demo æ¼”ç¤ºæµç¨‹

### åœºæ™¯1: ç®¡ç†å‘˜æ·»åŠ æ–°æ ‡ç­¾

**æ­¥éª¤**:
1. è®¿é—® `/admin/tags/categories` (æ ‡ç­¾åˆ†ç±»ç®¡ç†)
2. ç‚¹å‡»"æ–°å»ºåˆ†ç±»"æŒ‰é’®
3. å¡«å†™ä¿¡æ¯:
   - ä»£ç : `style`
   - åç§°: `é£æ ¼ä¸»é¢˜`
   - å›¾æ ‡: `Palette`
   - æ˜¾ç¤ºåœ¨ç­›é€‰å™¨: âœ…
4. ä¿å­˜åï¼Œç‚¹å‡»è¯¥åˆ†ç±»
5. æ·»åŠ æ ‡ç­¾: "ä¼ ç»Ÿå¤å…¸"ã€"æ—¶å°šç°ä»£"ã€"å¯çˆ±ç”œç¾"
6. ä¿å­˜

**ç»“æœ**: æ–°çš„ç­›é€‰ç»´åº¦ç«‹å³å¯ç”¨ï¼Œæ— éœ€ä»£ç éƒ¨ç½²ï¼

---

### åœºæ™¯2: å•†å®¶ç¼–è¾‘å¥—é¤æ ‡ç­¾

**æ­¥éª¤**:
1. ä»¥å•†å®¶èº«ä»½ç™»å½•
2. è®¿é—® `/merchant/plans` (å¥—é¤åˆ—è¡¨)
3. é€‰æ‹©ä¸€ä¸ªå¥—é¤ï¼Œç‚¹å‡»"ç¼–è¾‘æ ‡ç­¾"
4. çœ‹åˆ°æ‰€æœ‰å¯ç”¨æ ‡ç­¾åˆ†ç±»:
   - ä½¿ç”¨åœºæ™¯: â–¡ è¡—æ‹æ¼«æ­¥ â˜‘ å¯ºåº™å‚æ‹œ â–¡ çº¦ä¼š
   - ä»·æ ¼åŒºé—´: â–¡ ç»æµå‹ â˜‘ æ ‡å‡†å‹ â–¡ é«˜çº§å‹
   - æœåŠ¡ç­‰çº§: â–¡ åŸºç¡€ç‰ˆ â˜‘ æ ‡å‡†ç‰ˆ â–¡ é«˜çº§ç‰ˆ
   - é£æ ¼ä¸»é¢˜: â˜‘ ä¼ ç»Ÿå¤å…¸ â–¡ æ—¶å°šç°ä»£ â–¡ å¯çˆ±ç”œç¾ (ç®¡ç†å‘˜åˆšæ·»åŠ çš„!)
5. å‹¾é€‰/å–æ¶ˆæ ‡ç­¾
6. ç‚¹å‡»"ä¿å­˜"

**ç»“æœ**: å¥—é¤æ ‡ç­¾å®æ—¶æ›´æ–°ï¼Œå‰ç«¯ç«‹å³æ˜¾ç¤ºï¼

---

### åœºæ™¯3: æ¸¸å®¢ç­›é€‰å¥—é¤

**æ­¥éª¤**:
1. è®¿é—® `/plans` (å¥—é¤åˆ—è¡¨é¡µ)
2. å·¦ä¾§çœ‹åˆ°ç­›é€‰å™¨:
   ```
   ğŸ“ ä½¿ç”¨åœºæ™¯
   â–¡ è¡—æ‹æ¼«æ­¥ (15)
   â–¡ å¯ºåº™å‚æ‹œ (12)
   â–¡ çº¦ä¼š (8)
   â–¡ ä¸“ä¸šå†™çœŸ (5)

   ğŸ’° ä»·æ ¼åŒºé—´
   â–¡ ç»æµå‹ (10)
   â–¡ æ ‡å‡†å‹ (20)
   â–¡ é«˜çº§å‹ (15)

   â­ æœåŠ¡ç­‰çº§
   â–¡ åŸºç¡€ç‰ˆ (5)
   â–¡ æ ‡å‡†ç‰ˆ (25)
   â–¡ é«˜çº§ç‰ˆ (10)

   ğŸ¨ é£æ ¼ä¸»é¢˜ (æ–°å¢!)
   â–¡ ä¼ ç»Ÿå¤å…¸ (8)
   â–¡ æ—¶å°šç°ä»£ (12)
   â–¡ å¯çˆ±ç”œç¾ (6)
   ```
3. å‹¾é€‰"å¯ºåº™å‚æ‹œ" + "ä¼ ç»Ÿå¤å…¸"
4. å¥—é¤åˆ—è¡¨å®æ—¶ç­›é€‰
5. å¥—é¤å¡ç‰‡ä¸Šæ˜¾ç¤ºæ ‡ç­¾Badge

**ç»“æœ**: æ¸¸å®¢å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç¬¦åˆéœ€æ±‚çš„å¥—é¤ï¼

---

## ğŸ“ å…³é”®æ–‡ä»¶ä½ç½®

### æ•°æ®æ¨¡å‹
- `prisma/schema.prisma` - æ ‡ç­¾ç³»ç»Ÿæ¨¡å‹å®šä¹‰
- `prisma/migrations/add_tag_system/` - æ•°æ®åº“è¿ç§»

### ç§å­æ•°æ®
- `scripts/seed-tags-demo.ts` - Demoæ ‡ç­¾åˆå§‹åŒ–

### API (å¾…å®ç°)
- `src/app/api/admin/tags/categories/route.ts` - æ ‡ç­¾åˆ†ç±»CRUD
- `src/app/api/admin/tags/route.ts` - æ ‡ç­¾CRUD
- `src/app/api/merchant/plans/[id]/tags/route.ts` - å•†å®¶ç¼–è¾‘æ ‡ç­¾

### å‰ç«¯ (å¾…å®ç°)
- `src/app/admin/tags/categories/page.tsx` - ç®¡ç†å‘˜åˆ†ç±»ç®¡ç†
- `src/app/admin/tags/page.tsx` - ç®¡ç†å‘˜æ ‡ç­¾ç®¡ç†
- `src/app/merchant/plans/[id]/tags/page.tsx` - å•†å®¶æ ‡ç­¾ç¼–è¾‘
- `src/app/(main)/plans/PlansClient.tsx` - å‰ç«¯ç­›é€‰å™¨

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿æ¼”ç¤º

### 1. é›¶ä»£ç æ‰©å±•

**ä¼ ç»Ÿæ–¹å¼**:
```
éœ€è¦æ–°ç­›é€‰ç»´åº¦ â†’ ä¿®æ”¹ä»£ç  â†’ æ•°æ®åº“è¿ç§» â†’ éƒ¨ç½² (1-2å¤©)
```

**æ ‡ç­¾ç³»ç»Ÿ**:
```
éœ€è¦æ–°ç­›é€‰ç»´åº¦ â†’ ç®¡ç†ç•Œé¢ç‚¹å‡» â†’ ç«‹å³ç”Ÿæ•ˆ (5åˆ†é’Ÿ)
```

### 2. çµæ´»ç®¡ç†

- âœ… ç®¡ç†å‘˜æ§åˆ¶æ ‡ç­¾æ ‡å‡†
- âœ… å•†å®¶è‡ªä¸»é€‰æ‹©æ ‡ç­¾
- âœ… å‰ç«¯è‡ªåŠ¨æ¸²æŸ“ç­›é€‰å™¨
- âœ… æ”¯æŒå¤šè¯­è¨€ (nameEnå­—æ®µ)
- âœ… å›¾æ ‡å’Œé¢œè‰²ä¸»é¢˜

### 3. æ•°æ®ä¸€è‡´æ€§

- âœ… æ‰€æœ‰æ ‡ç­¾ç»Ÿä¸€ç®¡ç†
- âœ… è‡ªåŠ¨ç»Ÿè®¡ä½¿ç”¨æ¬¡æ•°
- âœ… çº§è”åˆ é™¤ä¿æŠ¤
- âœ… å”¯ä¸€æ€§çº¦æŸ

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### æµ‹è¯•1: åˆ›å»ºæ–°æ ‡ç­¾åˆ†ç±»

```
è¾“å…¥:
  - ä»£ç : duration
  - åç§°: ç§Ÿèµæ—¶é•¿
  - æ ‡ç­¾: 2-3å°æ—¶, 4-6å°æ—¶, 8å°æ—¶+

é¢„æœŸ:
  - å‰ç«¯ç­›é€‰å™¨è‡ªåŠ¨å¢åŠ "ç§Ÿèµæ—¶é•¿"é€‰é¡¹
  - å•†å®¶å¯ä»¥ä¸ºå¥—é¤é€‰æ‹©æ—¶é•¿æ ‡ç­¾
```

### æµ‹è¯•2: ä¿®æ”¹æ ‡ç­¾åç§°

```
æ“ä½œ: å°†"è¡—æ‹æ¼«æ­¥"æ”¹ä¸º"è¡—æ‹æ‰“å¡"

é¢„æœŸ:
  - æ‰€æœ‰ä½¿ç”¨è¯¥æ ‡ç­¾çš„å¥—é¤è‡ªåŠ¨æ›´æ–°æ˜¾ç¤º
  - ç­›é€‰å™¨æ˜¾ç¤ºæ–°åç§°
```

### æµ‹è¯•3: åœç”¨æ ‡ç­¾

```
æ“ä½œ: åœç”¨"ä¸“ä¸šå†™çœŸ"æ ‡ç­¾

é¢„æœŸ:
  - ç­›é€‰å™¨ä¸å†æ˜¾ç¤º
  - å·²æœ‰å¥—é¤ä¿ç•™æ ‡ç­¾ä½†å‰ç«¯éšè—
  - å•†å®¶ä¸èƒ½é€‰æ‹©è¯¥æ ‡ç­¾
```

### æµ‹è¯•4: åˆ é™¤æ ‡ç­¾

```
æ“ä½œ: å°è¯•åˆ é™¤æœ‰å¥—é¤ä½¿ç”¨çš„æ ‡ç­¾

é¢„æœŸ:
  - ç³»ç»Ÿé˜»æ­¢åˆ é™¤
  - æç¤º"æœ‰Xä¸ªå¥—é¤æ­£åœ¨ä½¿ç”¨"
```

---

## ğŸ“Š æ•°æ®åº“ç»“æ„

```sql
-- æ ‡ç­¾åˆ†ç±»
tag_categories
â”œâ”€â”€ id
â”œâ”€â”€ code (unique)       -- å¦‚: scene, price_range
â”œâ”€â”€ name               -- å¦‚: ä½¿ç”¨åœºæ™¯, ä»·æ ¼åŒºé—´
â”œâ”€â”€ show_in_filter     -- æ˜¯å¦æ˜¾ç¤ºåœ¨ç­›é€‰å™¨
â”œâ”€â”€ filter_order       -- ç­›é€‰å™¨ä¸­çš„æ’åº
â””â”€â”€ ...

-- æ ‡ç­¾
tags
â”œâ”€â”€ id
â”œâ”€â”€ category_id        -- æ‰€å±åˆ†ç±»
â”œâ”€â”€ code              -- å¦‚: casual_walk
â”œâ”€â”€ name              -- å¦‚: è¡—æ‹æ¼«æ­¥
â”œâ”€â”€ icon              -- Lucideå›¾æ ‡å
â”œâ”€â”€ usage_count       -- ä½¿ç”¨ç»Ÿè®¡
â””â”€â”€ ...

-- å¥—é¤-æ ‡ç­¾å…³è”
plan_tags
â”œâ”€â”€ id
â”œâ”€â”€ plan_id
â”œâ”€â”€ tag_id
â””â”€â”€ added_by          -- è°æ·»åŠ çš„
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1: è¿ç§»å¤±è´¥

```bash
# é‡ç½®æ•°æ®åº“ (è­¦å‘Š: åˆ é™¤æ‰€æœ‰æ•°æ®)
pnpm prisma migrate reset

# æˆ–æ‰‹åŠ¨åˆ é™¤è¡¨åé‡æ–°è¿ç§»
pnpm prisma db push --force-reset
```

### é—®é¢˜2: æ²¡æœ‰æ ‡ç­¾æ•°æ®

```bash
# é‡æ–°è¿è¡Œç§å­è„šæœ¬
pnpm tsx scripts/seed-tags-demo.ts
```

### é—®é¢˜3: Prisma Client ç±»å‹é”™è¯¯

```bash
# é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯
pnpm prisma generate
```

---

## ğŸ“ ä¸‹ä¸€æ­¥å®ç°æ¸…å•

å·²å®Œæˆ:
- [x] æ•°æ®åº“ schema è®¾è®¡
- [x] è¿ç§»æ–‡ä»¶
- [x] ç§å­æ•°æ®è„šæœ¬
- [x] Demo æ–‡æ¡£

å¾…å®ç° (æŒ‰ä¼˜å…ˆçº§):
1. [ ] **ç®¡ç†å‘˜API** (2å°æ—¶)
   - POST /api/admin/tags/categories - åˆ›å»ºåˆ†ç±»
   - GET /api/admin/tags/categories - è·å–æ‰€æœ‰åˆ†ç±»
   - POST /api/admin/tags - åˆ›å»ºæ ‡ç­¾
   - GET /api/admin/tags - è·å–æ‰€æœ‰æ ‡ç­¾

2. [ ] **ç®¡ç†å‘˜ç•Œé¢** (4å°æ—¶)
   - /admin/tags/categories - åˆ†ç±»ç®¡ç†
   - /admin/tags - æ ‡ç­¾ç®¡ç†

3. [ ] **å•†å®¶API** (1å°æ—¶)
   - GET /api/merchant/plans/[id]/tags - è·å–å¥—é¤æ ‡ç­¾
   - PUT /api/merchant/plans/[id]/tags - æ›´æ–°å¥—é¤æ ‡ç­¾

4. [ ] **å•†å®¶ç•Œé¢** (3å°æ—¶)
   - /merchant/plans/[id]/tags - æ ‡ç­¾ç¼–è¾‘å™¨

5. [ ] **å‰ç«¯ç­›é€‰å™¨** (2å°æ—¶)
   - æ›´æ–° PlansClient.tsx
   - æ›´æ–° PlanCard.tsx

**æ€»è®¡**: çº¦12å°æ—¶å®Œæˆå®Œæ•´Demo

---

## ğŸ‰ Demo è„šæœ¬ç¤ºä¾‹

**æ¼”ç¤ºæ—¶é•¿**: 5åˆ†é’Ÿ

**å°è¯**:

> "å¤§å®¶å¥½ï¼Œä»Šå¤©æ¼”ç¤ºæˆ‘ä»¬çš„æ™ºèƒ½æ ‡ç­¾ç®¡ç†ç³»ç»Ÿã€‚
>
> **[ç®¡ç†å‘˜è§†è§’]**
> å‡è®¾æ¸¸å®¢åé¦ˆè¯´æƒ³æŒ‰'é€‚åˆäººç¾¤'æ¥ç­›é€‰å¥—é¤ã€‚ä¼ ç»Ÿæ–¹å¼éœ€è¦1-2å¤©å¼€å‘éƒ¨ç½²ï¼Œ
> ä½†ç”¨æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œåªéœ€5åˆ†é’Ÿã€‚
>
> çœ‹ï¼Œæˆ‘ç°åœ¨ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•ï¼Œæ‰“å¼€æ ‡ç­¾ç®¡ç†é¡µé¢ï¼Œ
> ç‚¹å‡»'æ–°å»ºåˆ†ç±»'ï¼Œè¾“å…¥'é€‚åˆäººç¾¤'ï¼Œ
> ç„¶åæ·»åŠ å‡ ä¸ªæ ‡ç­¾ï¼š'å¹´è½»å¥³æ€§'ã€'æƒ…ä¾£'ã€'å®¶åº­'ã€‚
> ä¿å­˜ï¼å®Œæˆäº†ã€‚
>
> **[å•†å®¶è§†è§’]**
> ç°åœ¨å•†å®¶ç«‹å³å¯ä»¥ä½¿ç”¨è¿™äº›æ ‡ç­¾ã€‚
> æˆ‘åˆ‡æ¢åˆ°å•†å®¶è´¦å·ï¼Œé€‰æ‹©ä¸€ä¸ªå¥—é¤ï¼Œç‚¹å‡»'ç¼–è¾‘æ ‡ç­¾'ï¼Œ
> çœ‹ï¼Œåˆšæ‰åˆ›å»ºçš„'é€‚åˆäººç¾¤'åˆ†ç±»å·²ç»å‡ºç°äº†ï¼
> æˆ‘å‹¾é€‰'æƒ…ä¾£'ï¼Œä¿å­˜ã€‚
>
> **[æ¸¸å®¢è§†è§’]**
> æœ€åï¼Œæ¸¸å®¢è®¿é—®å¥—é¤åˆ—è¡¨é¡µï¼Œ
> å·¦ä¾§ç­›é€‰å™¨è‡ªåŠ¨æ˜¾ç¤ºäº†'é€‚åˆäººç¾¤'é€‰é¡¹ï¼Œ
> é€‰æ‹©'æƒ…ä¾£'ï¼Œå¥—é¤åˆ—è¡¨å®æ—¶ç­›é€‰ã€‚
> å¡ç‰‡ä¸Šä¹Ÿæ˜¾ç¤ºäº†'æƒ…ä¾£'æ ‡ç­¾ã€‚
>
> ä»ç®¡ç†å‘˜åˆ›å»ºæ ‡ç­¾ï¼Œåˆ°æ¸¸å®¢çœ‹åˆ°æ•ˆæœï¼Œ
> æ•´ä¸ªæµç¨‹ä¸åˆ°5åˆ†é’Ÿï¼Œé›¶ä»£ç éƒ¨ç½²ï¼
>
> è¿™å°±æ˜¯æˆ‘ä»¬æ ‡ç­¾ç³»ç»Ÿçš„æ ¸å¿ƒä»·å€¼ï¼šçµæ´»ã€å¿«é€Ÿã€æ ‡å‡†åŒ–ã€‚"

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æŸ¥çœ‹:
- [å®Œæ•´è®¾è®¡æ–‡æ¡£](./tag-management-system.md)
- [æ€§èƒ½åˆ†ææ–‡æ¡£](./performance-analysis-plan-b.md)
- [æ•°æ®æ¨¡å‹é‡è®¾è®¡](./rental-plan-redesign.md)
