# 套餐标签功能实现

## 🎯 功能概述

为每个套餐添加地区、店铺和特色标签，使用不同的图标区分，并移除重复的"和服租赁"标签。

## ✨ 实现的功能

### 1. **数据库Schema更新**

添加了三个新字段到 `RentalPlan` 模型：

```prisma
model RentalPlan {
  // ... 其他字段
  
  storeName String?    // 店铺名称（如"浅草本店"）
  region    String?    // 地区（如"东京地区"）
  tags      String[]   // 标签数组（如["蕾丝和服", "10周年优惠"]）
  
  // ... 其他字段
}
```

### 2. **标签显示设计**

#### 标签类型和图标

| 标签类型 | 图标 | 颜色 | 示例 |
|----------|------|------|------|
| **地区** | 📍 MapPin | 蓝色 (blue-600) | 东京地区 |
| **店铺** | 🏪 Store | 绿色 (green-600) | 浅草本店 |
| **特色** | 🏷️ Tag | 琥珀色 (amber-600) | 蕾丝和服、情侣套餐 |

#### 视觉样式
```tsx
<div className="inline-flex items-center gap-1 text-xs text-muted-foreground bg-secondary/50 px-2 py-1 rounded-md">
  <Icon className="w-3 h-3 text-[color]" />
  <span>{text}</span>
</div>
```

### 3. **标签显示逻辑**

```tsx
// 显示顺序：地区 → 店铺 → 特色标签（最多2个）
<div className="flex flex-wrap gap-2 mb-4">
  {plan.region && <RegionTag />}
  {plan.storeName && <StoreTag />}
  {plan.tags?.slice(0, 2).map(tag => <FeatureTag />)}
</div>
```

### 4. **数据清洗**

#### 移除重复的"和服租赁"
导入脚本中过滤掉了"和服租赁"标签：

```javascript
// includes 字段中移除
const includes = extractIncludes(plan.name, plan.description).filter(
  service => service !== '和服租赁'
);

// tags 字段中移除
const tags = plan.tags ? plan.tags.filter(tag => tag !== '和服租赁') : [];
```

## 📊 实际示例

### 示例1：蕾丝和服套餐

```
套餐名称: 和洋蕾丝和服 (10周年优惠,不可退款,浅草本店限定)

标签显示：
┌─────────────────────────────────┐
│ 📍 东京地区                      │
│ 🏪 浅草本店                      │
│ 🏷️ 蕾丝和服                     │
│ 🏷️ 10周年优惠                   │
└─────────────────────────────────┘

包含服务：
✓ 专业着装服务
✓ 发型设计
✓ 蕾丝和服
```

### 示例2：情侣套餐

```
套餐名称: 和洋蕾絲和服情侶方案(10週年優惠,不可退款)

标签显示：
┌─────────────────────────────────┐
│ 📍 东京地区                      │
│ 🏪 浅草本店                      │
│ 🏷️ 情侣套餐                     │
│ 🏷️ 蕾丝和服                     │
└─────────────────────────────────┘
```

### 示例3：京都套餐

```
套餐名称: 男士武士袴礼服(10周年优惠,不可退款,京都清水寺店)

标签显示：
┌─────────────────────────────────┐
│ 📍 京都地区                      │
│ 🏪 清水寺店                      │
│ 🏷️ 男士套餐                     │
│ 🏷️ 10周年优惠                   │
└─────────────────────────────────┘
```

## 🎨 视觉设计

### 套餐卡片完整布局

```
┌─────────────────────────┐
│ 省¥350    限时54% OFF    │ ← 优惠标签（左上角）
│                         │
│   [套餐图片]             │
│                         │
├─────────────────────────┤
│ LADIES 分类标签          │ ← 分类
│ 和洋蕾丝和服             │ ← 名称
│ Lace Kimono Plan        │ ← 英文名
│                         │
│ ¥300  ¥650              │ ← 价格对比
│ 💰 线上预约优惠价         │
│ 立省54%                 │
│                         │
│ 8 小时                  │ ← 时长
│                         │
│ 体验过了传统的和服...     │ ← 描述
│                         │
│ 📍 东京地区              │ ← 标签（地区）
│ 🏪 浅草本店              │ ← 标签（店铺）
│ 🏷️ 蕾丝和服              │ ← 标签（特色）
│ 🏷️ 10周年优惠            │ ← 标签（特色）
│                         │
│ ✓ 专业着装服务           │ ← 包含服务
│ ✓ 发型设计              │
│ ✓ 蕾丝和服              │
│                         │
│ [立即预约]               │ ← 主按钮
│ [加入购物车]             │ ← 次按钮
└─────────────────────────┘
```

### 颜色系统

| 元素 | 颜色 | 用途 |
|------|------|------|
| **地区图标** | 蓝色 (blue-600) | 地理位置 |
| **店铺图标** | 绿色 (green-600) | 店铺信息 |
| **标签图标** | 琥珀色 (amber-600) | 特色标签 |
| **优惠标签** | 红色/橙色 | 促销信息 |
| **价格** | 主题色 (primary) | 吸引注意 |

## 📈 用户体验提升

### 信息层次

1. **第一眼**：优惠标签（红色，左上角）
2. **第二眼**：套餐图片
3. **第三眼**：价格对比
4. **浏览细节**：标签、描述、服务

### 标签作用

1. **地区标签** 📍
   - 帮助用户快速识别套餐所在区域
   - 支持用户根据行程选择

2. **店铺标签** 🏪
   - 明确套餐适用的具体店铺
   - 避免用户选错店铺

3. **特色标签** 🏷️
   - 突出套餐的独特卖点
   - 帮助用户快速筛选

## 🔄 标签筛选功能（未来扩展）

### 建议的筛选功能

```tsx
// 未来可以添加标签筛选
<TagFilter>
  <button onClick={() => filterByTag('蕾丝和服')}>
    🏷️ 蕾丝和服
  </button>
  <button onClick={() => filterByTag('情侣套餐')}>
    🏷️ 情侣套餐
  </button>
  <button onClick={() => filterByTag('10周年优惠')}>
    🏷️ 10周年优惠
  </button>
</TagFilter>
```

## 🎯 数据统计

根据导入的数据：

- **总套餐数**：58个
- **有店铺信息的套餐**：~50个
- **有地区信息的套餐**：~50个
- **有标签的套餐**：~50个

### 常见标签分布

- 10周年优惠：~20个
- 蕾丝和服：~5个
- 情侣套餐：7个
- 男士套餐：8个
- 家庭/亲子：4个

## ✅ 完成清单

- [x] 更新数据库schema（添加storeName, region, tags）
- [x] 更新导入脚本（导入新字段，移除"和服租赁"）
- [x] 清空并重新导入数据（58个套餐）
- [x] 更新TypeScript接口（RentalPlan）
- [x] 添加标签显示UI（不同图标和颜色）
- [x] 测试并验证数据正确性

## 🎉 效果预览

现在每个套餐卡片包含：
1. **优惠标签**：左上角红色省钱标签
2. **价格对比**：原价删除线 + 线上优惠价
3. **地区标签**：蓝色地图图标
4. **店铺标签**：绿色店铺图标
5. **特色标签**：琥珀色标签图标（最多2个）
6. **包含服务**：绿色勾选列表

这样的设计既美观又实用，帮助用户快速了解套餐信息，提升转化率！
