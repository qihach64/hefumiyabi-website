# Kimono AI å®¢æœç³»ç»Ÿ - å¤šç§Ÿæˆ·ä¼˜åŒ–å¼€å‘è®¡åˆ’

## é¡¹ç›®æ¦‚è¿°

### ä¸šåŠ¡èƒŒæ™¯
- **å¹³å°å®šä½**: å’Œæœç§Ÿèµæ’®åˆäº¤æ˜“å¹³å°
- **ç”¨æˆ·ç¾¤ä½“**:
  - Bç«¯ï¼šå’Œæœç§Ÿèµå•†å®¶ï¼ˆäº¬éƒ½ã€ä¸œäº¬ç­‰åœ°ï¼‰
  - Cç«¯ï¼šè®¿æ—¥æ¸¸å®¢
- **æ ¸å¿ƒä»·å€¼**: æ¯ä¸ªå•†å®¶é€šè¿‡æ—¥å¸¸ä½¿ç”¨ç§¯ç´¯ä¸“å±è¯­æ–™åº“ï¼Œå®ç°ä¸ªæ€§åŒ– AI å®¢æœ

### ç³»ç»Ÿç›®æ ‡
1. **å¤šç§Ÿæˆ·éš”ç¦»**: æ¯ä¸ªå•†å®¶æ‹¥æœ‰ç‹¬ç«‹çš„è¯­æ–™åº“
2. **æ¸è¿›å¼å­¦ä¹ **: å®¢æœæ—¥å¸¸ä½¿ç”¨ä¸­ç§¯ç´¯ã€çº åè¯­æ–™
3. **é€šç”¨æ¨¡æ¿**: æ–°å•†å®¶å¯ä½¿ç”¨é€šç”¨è¯­æ–™å¿«é€Ÿå¯åŠ¨
4. **ååŒå·¥ä½œ**: æ”¯æŒå¤šå®¢æœåŒæ—¶ä½¿ç”¨åŒä¸€å•†å®¶è´¦å·

### æŠ€æœ¯æ¶æ„æ¼”è¿›

```
å½“å‰æ¶æ„                           ç›®æ ‡æ¶æ„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å•ä¸€è¯­æ–™åº“   â”‚                 â”‚        å¤šç§Ÿæˆ·æ¶æ„             â”‚
â”‚  (Pinecone)  â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚      â”€â”€â–º        â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚
â”‚  å†…å­˜å¯¹è¯    â”‚                 â”‚  â”‚å•†å®¶Aâ”‚ â”‚å•†å®¶Bâ”‚ â”‚å•†å®¶Câ”‚    â”‚
â”‚              â”‚                 â”‚  â”‚è¯­æ–™ â”‚ â”‚è¯­æ–™ â”‚ â”‚è¯­æ–™ â”‚    â”‚
â”‚  æ— åé¦ˆå­˜å‚¨  â”‚                 â”‚  â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                 â”‚         Pinecone              â”‚
                                 â”‚      (namespaceéš”ç¦»)          â”‚
                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                 â”‚  PostgreSQL / SQLite          â”‚
                                 â”‚  - å•†å®¶è´¦å·                   â”‚
                                 â”‚  - å®¢æœè´¦å·                   â”‚
                                 â”‚  - å¯¹è¯å†å²                   â”‚
                                 â”‚  - åé¦ˆæ•°æ®                   â”‚
                                 â”‚  - è¯­æ–™å®¡æ ¸é˜Ÿåˆ—               â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¼€å‘é˜¶æ®µæ€»è§ˆ

| Phase | åç§° | æ ¸å¿ƒç›®æ ‡ | é¢„è®¡å·¥ä½œé‡ |
|-------|------|----------|-----------|
| 1 | æ•°æ®æŒä¹…åŒ– | æ·»åŠ æ•°æ®åº“ï¼Œå­˜å‚¨åé¦ˆå’Œå¯¹è¯ | åŸºç¡€ |
| 2 | å¤šç§Ÿæˆ·æ¶æ„ | å•†å®¶/å®¢æœè´¦å·ï¼Œè¯­æ–™éš”ç¦» | æ ¸å¿ƒ |
| 3 | è¯­æ–™å­¦ä¹ ç³»ç»Ÿ | æ­£è´Ÿåé¦ˆæ”¶é›†ï¼Œçº åæœºåˆ¶ | æ ¸å¿ƒ |
| 4 | é€šç”¨æ¨¡æ¿è¯­æ–™ | æå–é€šç”¨è¯­æ–™ï¼Œæ–°å•†å®¶åˆå§‹åŒ– | é‡è¦ |
| 5 | å®¢æœç•Œé¢ä¼˜åŒ– | å¤šå®¢æœæ”¯æŒï¼Œè¯­æ–™ç®¡ç†åå° | ä½“éªŒ |
| 6 | ç”Ÿäº§éƒ¨ç½²å‡†å¤‡ | æ€§èƒ½ä¼˜åŒ–ï¼Œç›‘æ§ï¼Œå¤‡ä»½ | è¿ç»´ |

---

## Phase 1: æ•°æ®æŒä¹…åŒ–

### 1.1 ç›®æ ‡
ä¸ºç³»ç»Ÿæ·»åŠ å…³ç³»å‹æ•°æ®åº“ï¼ŒæŒä¹…åŒ–å­˜å‚¨å…³é”®ä¸šåŠ¡æ•°æ®ã€‚

### 1.2 æŠ€æœ¯é€‰å‹

| ç¯å¢ƒ | æ•°æ®åº“ | ç†ç”± |
|-----|--------|------|
| å¼€å‘/æµ‹è¯• | SQLite | è½»é‡ï¼Œæ— éœ€é¢å¤–æœåŠ¡ï¼Œä¾¿äºå¼€å‘ |
| ç”Ÿäº§ç¯å¢ƒ | PostgreSQL | é«˜å¹¶å‘ï¼ŒJSON æ”¯æŒï¼Œå¯æ‰©å±• |

**ORM é€‰æ‹©**: SQLAlchemyï¼ˆæ”¯æŒæ— ç¼åˆ‡æ¢æ•°æ®åº“ï¼‰

### 1.3 æ•°æ®åº“æ¨¡å‹è®¾è®¡

```python
# åé¦ˆè®°å½•è¡¨
class Feedback(Base):
    __tablename__ = "feedbacks"

    id = Column(Integer, primary_key=True)
    tenant_id = Column(String, index=True)          # å•†å®¶ IDï¼ˆé¢„ç•™ï¼‰
    conversation_id = Column(String, index=True)    # ä¼šè¯ ID
    message_id = Column(String)                     # æ¶ˆæ¯ ID

    # åé¦ˆå†…å®¹
    rating = Column(Integer)                        # è¯„åˆ† 1-5
    feedback_type = Column(String)                  # positive/negative
    original_answer = Column(Text)                  # AI åŸå§‹å›ç­”
    corrected_answer = Column(Text, nullable=True)  # å®¢æœçº æ­£çš„ç­”æ¡ˆ
    user_question = Column(Text)                    # ç”¨æˆ·åŸå§‹é—®é¢˜

    # å¤„ç†çŠ¶æ€
    status = Column(String, default="pending")      # pending/approved/rejected/applied
    reviewed_by = Column(String, nullable=True)     # å®¡æ ¸äºº
    reviewed_at = Column(DateTime, nullable=True)   # å®¡æ ¸æ—¶é—´

    # å…ƒæ•°æ®
    created_at = Column(DateTime, default=func.now())
    metadata = Column(JSON, nullable=True)          # é¢å¤–ä¿¡æ¯

# å¯¹è¯è®°å½•è¡¨
class Conversation(Base):
    __tablename__ = "conversations"

    id = Column(String, primary_key=True)           # ä¼šè¯ ID
    tenant_id = Column(String, index=True)          # å•†å®¶ IDï¼ˆé¢„ç•™ï¼‰

    messages = Column(JSON)                         # æ¶ˆæ¯åˆ—è¡¨

    created_at = Column(DateTime, default=func.now())
    updated_at = Column(DateTime, onupdate=func.now())
    metadata = Column(JSON, nullable=True)

# è¯­æ–™æ¡ç›®è¡¨ï¼ˆç”¨äºå®¡æ ¸å’Œç®¡ç†ï¼‰
class QAPair(Base):
    __tablename__ = "qa_pairs"

    id = Column(Integer, primary_key=True)
    tenant_id = Column(String, index=True)          # å•†å®¶ ID

    question = Column(Text)                         # é—®é¢˜
    answer = Column(Text)                           # ç­”æ¡ˆ
    category = Column(String)                       # åˆ†ç±»

    source = Column(String)                         # æ¥æº: import/feedback/manual
    quality_score = Column(Float, default=0.8)      # è´¨é‡åˆ†æ•°

    # å‘é‡çŠ¶æ€
    vector_id = Column(String, nullable=True)       # Pinecone å‘é‡ ID
    is_synced = Column(Boolean, default=False)      # æ˜¯å¦å·²åŒæ­¥åˆ°å‘é‡åº“

    created_at = Column(DateTime, default=func.now())
    updated_at = Column(DateTime, onupdate=func.now())
```

### 1.4 ç›®å½•ç»“æ„å˜æ›´

```
src/
â”œâ”€â”€ database/                    # æ–°å¢
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ connection.py           # æ•°æ®åº“è¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ models.py               # ORM æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ repositories/           # æ•°æ®è®¿é—®å±‚
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ feedback_repo.py
â”‚       â”œâ”€â”€ conversation_repo.py
â”‚       â””â”€â”€ qa_pair_repo.py
â”œâ”€â”€ api/
â”œâ”€â”€ knowledge/
â”œâ”€â”€ rag/
â””â”€â”€ static/
```

### 1.5 Gate 1 Review éªŒæ”¶æ ‡å‡†

| ID | æ£€æŸ¥é¡¹ | éªŒæ”¶æ ‡å‡† |
|----|--------|----------|
| P1.1 | æ•°æ®åº“è¿æ¥ | SQLite æ•°æ®åº“æ–‡ä»¶åˆ›å»ºæˆåŠŸ |
| P1.2 | è¡¨ç»“æ„åˆ›å»º | æ‰€æœ‰è¡¨æ­£ç¡®åˆ›å»ºï¼Œå­—æ®µå®Œæ•´ |
| P1.3 | åé¦ˆå­˜å‚¨ | åé¦ˆ API æ•°æ®å†™å…¥æ•°æ®åº“ |
| P1.4 | å¯¹è¯å­˜å‚¨ | å¯¹è¯å†å²æŒä¹…åŒ–åˆ°æ•°æ®åº“ |
| P1.5 | æ•°æ®æŸ¥è¯¢ | å¯æŒ‰æ¡ä»¶æŸ¥è¯¢åé¦ˆå’Œå¯¹è¯ |
| P1.6 | é‡å¯æ¢å¤ | æœåŠ¡é‡å¯åæ•°æ®ä¸ä¸¢å¤± |
| P1.7 | API å…¼å®¹ | ç°æœ‰ API æ¥å£ä¿æŒå…¼å®¹ |

### 1.6 äº¤ä»˜ç‰©
- `src/database/` ç›®å½•åŠæ‰€æœ‰æ–‡ä»¶
- æ•°æ®åº“è¿ç§»è„šæœ¬
- æ›´æ–°åçš„ API è·¯ç”±
- `scripts/phase1_gate_review.py` éªŒæ”¶è„šæœ¬

---

## Phase 2: å¤šç§Ÿæˆ·æ¶æ„

### 2.1 ç›®æ ‡
å®ç°å•†å®¶å’Œå®¢æœçš„è´¦å·ç³»ç»Ÿï¼Œç¡®ä¿è¯­æ–™åº“å®Œå…¨éš”ç¦»ã€‚

### 2.2 è´¦å·ä½“ç³»è®¾è®¡

```
å¹³å°ç®¡ç†å‘˜ (admin)
    â”‚
    â”œâ”€â”€ å•†å®¶ A (tenant)
    â”‚   â”œâ”€â”€ å®¢æœ 1 (staff)
    â”‚   â”œâ”€â”€ å®¢æœ 2 (staff)
    â”‚   â””â”€â”€ ç®¡ç†å‘˜ (tenant_admin)
    â”‚
    â”œâ”€â”€ å•†å®¶ B (tenant)
    â”‚   â”œâ”€â”€ å®¢æœ 1 (staff)
    â”‚   â””â”€â”€ ...
    â”‚
    â””â”€â”€ ...
```

### 2.3 æ•°æ®åº“æ¨¡å‹æ‰©å±•

```python
# å•†å®¶è¡¨
class Tenant(Base):
    __tablename__ = "tenants"

    id = Column(String, primary_key=True)           # å•†å®¶ ID
    name = Column(String)                           # å•†å®¶åç§°

    # Pinecone é…ç½®
    namespace = Column(String, unique=True)         # å‘é‡åº“å‘½åç©ºé—´

    # é…ç½®
    settings = Column(JSON, default={})             # å•†å®¶é…ç½®

    # çŠ¶æ€
    status = Column(String, default="active")       # active/suspended

    created_at = Column(DateTime, default=func.now())

# ç”¨æˆ·è¡¨ï¼ˆå®¢æœ/ç®¡ç†å‘˜ï¼‰
class User(Base):
    __tablename__ = "users"

    id = Column(String, primary_key=True)
    tenant_id = Column(String, ForeignKey("tenants.id"))

    username = Column(String, unique=True)
    password_hash = Column(String)                  # bcrypt åŠ å¯†

    role = Column(String)                           # tenant_admin/staff
    display_name = Column(String)

    is_active = Column(Boolean, default=True)
    last_login = Column(DateTime, nullable=True)

    created_at = Column(DateTime, default=func.now())
```

### 2.4 è®¤è¯æ–¹æ¡ˆ

| æ–¹æ¡ˆ | æŠ€æœ¯ | è¯´æ˜ |
|-----|------|------|
| è®¤è¯æ–¹å¼ | JWT Token | æ— çŠ¶æ€ï¼Œæ”¯æŒåˆ†å¸ƒå¼ |
| å¯†ç åŠ å¯† | bcrypt | å®‰å…¨å¯é  |
| Token æœ‰æ•ˆæœŸ | 24 å°æ—¶ | å¯é…ç½® |
| åˆ·æ–°æœºåˆ¶ | Refresh Token | 7 å¤©æœ‰æ•ˆ |

### 2.5 è¯­æ–™éš”ç¦»ç­–ç•¥

```python
# Pinecone å‘½åç©ºé—´éš”ç¦»
å•†å®¶ A çš„è¯­æ–™ â†’ namespace: "tenant_a"
å•†å®¶ B çš„è¯­æ–™ â†’ namespace: "tenant_b"
é€šç”¨æ¨¡æ¿è¯­æ–™ â†’ namespace: "common_template"

# æŸ¥è¯¢æ—¶è‡ªåŠ¨æ·»åŠ ç§Ÿæˆ·è¿‡æ»¤
def search_knowledge(tenant_id: str, query: str):
    namespace = get_tenant_namespace(tenant_id)
    results = pinecone_index.query(
        vector=embedding,
        namespace=namespace,  # è‡ªåŠ¨éš”ç¦»
        top_k=5
    )
```

### 2.6 Gate 2 Review éªŒæ”¶æ ‡å‡†

| ID | æ£€æŸ¥é¡¹ | éªŒæ”¶æ ‡å‡† |
|----|--------|----------|
| P2.1 | å•†å®¶æ³¨å†Œ | å¯åˆ›å»ºå•†å®¶è´¦å·ï¼Œè‡ªåŠ¨åˆ†é… namespace |
| P2.2 | å®¢æœè´¦å· | å•†å®¶ç®¡ç†å‘˜å¯åˆ›å»º/ç®¡ç†å®¢æœè´¦å· |
| P2.3 | ç™»å½•è®¤è¯ | JWT ç™»å½•ï¼ŒToken åˆ·æ–°æ­£å¸¸ |
| P2.4 | æƒé™æ§åˆ¶ | å®¢æœåªèƒ½è®¿é—®æœ¬å•†å®¶æ•°æ® |
| P2.5 | è¯­æ–™éš”ç¦» | ä¸åŒå•†å®¶æŸ¥è¯¢ç»“æœå®Œå…¨éš”ç¦» |
| P2.6 | ä¼šè¯éš”ç¦» | å¯¹è¯å†å²æŒ‰å•†å®¶éš”ç¦» |
| P2.7 | å‰ç«¯é€‚é… | ç™»å½•é¡µé¢ï¼Œå•†å®¶åˆ‡æ¢ |

### 2.7 äº¤ä»˜ç‰©
- å•†å®¶/ç”¨æˆ·ç®¡ç† API
- JWT è®¤è¯ä¸­é—´ä»¶
- å‰ç«¯ç™»å½•é¡µé¢
- å•†å®¶ç®¡ç†åå°ï¼ˆåŸºç¡€ç‰ˆï¼‰
- `scripts/phase2_gate_review.py` éªŒæ”¶è„šæœ¬

---

## Phase 3: è¯­æ–™å­¦ä¹ ç³»ç»Ÿ

### 3.1 ç›®æ ‡
å®ç°åŸºäºå®¢æœåé¦ˆçš„è¯­æ–™æ”¶é›†ã€å®¡æ ¸å’Œè‡ªåŠ¨æ›´æ–°æœºåˆ¶ã€‚

### 3.2 å·¥ä½œæµç¨‹è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è¯­æ–™å­¦ä¹ å·¥ä½œæµ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. å®¢æœä½¿ç”¨                                                    â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚     â”‚ å®¢æˆ·é—®é¢˜ â”‚                                               â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚          â–¼                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚     â”‚ AI å›ç­”  â”‚â”€â”€â”€â”€â–ºâ”‚ å®¢æœåˆ¤æ–­ â”‚                              â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                           â”‚                                     â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚          â–¼                â–¼                â–¼                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚     â”‚ ğŸ‘ é‡‡çº³  â”‚     â”‚ ğŸ‘ ä¸å¥½  â”‚     â”‚ âœï¸ ä¿®æ”¹  â”‚               â”‚
â”‚     â”‚ rating=5â”‚     â”‚ ratingâ‰¤2â”‚     â”‚ ç¼–è¾‘å  â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚ é‡‡çº³    â”‚               â”‚
â”‚          â”‚               â”‚          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚
â”‚          â–¼               â–¼               â–¼                     â”‚
â”‚  2. åé¦ˆæ”¶é›†                                                    â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚              åé¦ˆæ•°æ®åº“                  â”‚                â”‚
â”‚     â”‚  - é—®é¢˜ + AIå›ç­” + è¯„åˆ†                  â”‚                â”‚
â”‚     â”‚  - é—®é¢˜ + AIå›ç­” + æ­£ç¡®ç­”æ¡ˆï¼ˆçº åï¼‰       â”‚                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                       â”‚                                         â”‚
â”‚                       â–¼                                         â”‚
â”‚  3. è¯­æ–™å®¡æ ¸ï¼ˆå¯é€‰ï¼‰                                            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚              å®¡æ ¸é˜Ÿåˆ—                    â”‚                â”‚
â”‚     â”‚  - é«˜è¯„åˆ†è‡ªåŠ¨é€šè¿‡                        â”‚                â”‚
â”‚     â”‚  - çº åè¯­æ–™éœ€äººå·¥å®¡æ ¸                    â”‚                â”‚
â”‚     â”‚  - ä½è¯„åˆ†æ ‡è®°é—®é¢˜                        â”‚                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                       â”‚                                         â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚          â–¼            â–¼            â–¼                           â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚     â”‚ è‡ªåŠ¨é€šè¿‡â”‚ â”‚ äººå·¥å®¡æ ¸â”‚ â”‚ æ ‡è®°é—®é¢˜â”‚                       â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                       â”‚
â”‚          â”‚           â”‚           â”‚                             â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                      â–¼                                          â”‚
â”‚  4. çŸ¥è¯†åº“æ›´æ–°                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚         Pinecone å‘é‡åº“æ›´æ–°              â”‚                â”‚
â”‚     â”‚  - æ–°å¢é«˜è´¨é‡é—®ç­”å¯¹                      â”‚                â”‚
â”‚     â”‚  - æ›´æ–°/æ›¿æ¢é”™è¯¯ç­”æ¡ˆ                     â”‚                â”‚
â”‚     â”‚  - è°ƒæ•´è´¨é‡åˆ†æ•°                          â”‚                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 åé¦ˆ API æ‰©å±•

```python
# æ‰©å±•åé¦ˆè¯·æ±‚æ¨¡å‹
class FeedbackRequest(BaseModel):
    conversation_id: str
    message_id: str
    rating: int                           # 1-5 è¯„åˆ†
    feedback_type: str                    # positive/negative/corrected

    # çº åæ—¶å¿…å¡«
    corrected_answer: Optional[str]       # æ­£ç¡®ç­”æ¡ˆ

    # å¯é€‰
    comment: Optional[str]                # å¤‡æ³¨

# æ–°å¢ API
POST /api/v1/feedback/submit              # æäº¤åé¦ˆï¼ˆæ‰©å±•ï¼‰
GET  /api/v1/feedback/pending             # å¾…å®¡æ ¸åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰
POST /api/v1/feedback/{id}/approve        # å®¡æ ¸é€šè¿‡
POST /api/v1/feedback/{id}/reject         # å®¡æ ¸æ‹’ç»
POST /api/v1/feedback/batch-apply         # æ‰¹é‡åº”ç”¨åˆ°çŸ¥è¯†åº“
```

### 3.4 è‡ªåŠ¨å­¦ä¹ è§„åˆ™

```python
class LearningRules:
    """è¯­æ–™å­¦ä¹ è§„åˆ™"""

    # è‡ªåŠ¨é€šè¿‡è§„åˆ™
    AUTO_APPROVE_CONDITIONS = {
        "min_rating": 5,                  # è¯„åˆ† 5 æ˜Ÿ
        "feedback_type": "positive",      # æ­£å‘åé¦ˆ
        "min_occurrences": 3,             # åŒç±»é—®é¢˜å‡ºç° 3 æ¬¡ä»¥ä¸Š
    }

    # éœ€è¦å®¡æ ¸çš„æƒ…å†µ
    REQUIRE_REVIEW = {
        "corrected_answers": True,        # æ‰€æœ‰çº åç­”æ¡ˆ
        "rating_range": (2, 4),           # ä¸­ç­‰è¯„åˆ†
    }

    # è‡ªåŠ¨æ ‡è®°é—®é¢˜
    AUTO_FLAG_CONDITIONS = {
        "max_rating": 1,                  # è¯„åˆ† 1 æ˜Ÿ
        "negative_count": 5,              # 5 æ¬¡ä»¥ä¸Šè´Ÿåé¦ˆ
    }
```

### 3.5 Gate 3 Review éªŒæ”¶æ ‡å‡†

| ID | æ£€æŸ¥é¡¹ | éªŒæ”¶æ ‡å‡† |
|----|--------|----------|
| P3.1 | æ­£å‘åé¦ˆ | ç‚¹å‡»é‡‡çº³ï¼Œåé¦ˆæ­£ç¡®å­˜å‚¨ |
| P3.2 | è´Ÿå‘åé¦ˆ | ç‚¹å‡»ä¸å¥½ï¼Œå¯è¾“å…¥æ­£ç¡®ç­”æ¡ˆ |
| P3.3 | ç¼–è¾‘ç­”æ¡ˆ | å®¢æœå¯ç¼–è¾‘åé‡‡çº³ |
| P3.4 | å®¡æ ¸é˜Ÿåˆ— | ç®¡ç†å‘˜å¯æŸ¥çœ‹å¾…å®¡æ ¸åˆ—è¡¨ |
| P3.5 | å®¡æ ¸æ“ä½œ | é€šè¿‡/æ‹’ç»åŠŸèƒ½æ­£å¸¸ |
| P3.6 | è‡ªåŠ¨è§„åˆ™ | é«˜è¯„åˆ†è‡ªåŠ¨é€šè¿‡ç”Ÿæ•ˆ |
| P3.7 | çŸ¥è¯†åº“æ›´æ–° | å®¡æ ¸é€šè¿‡çš„è¯­æ–™åŒæ­¥åˆ° Pinecone |
| P3.8 | å‰ç«¯é€‚é… | åé¦ˆ UI æ”¯æŒè¾“å…¥æ­£ç¡®ç­”æ¡ˆ |

### 3.6 äº¤ä»˜ç‰©
- æ‰©å±•çš„åé¦ˆ API
- è¯­æ–™å®¡æ ¸åå°
- è‡ªåŠ¨å­¦ä¹ å¼•æ“
- çŸ¥è¯†åº“åŒæ­¥æœåŠ¡
- `scripts/phase3_gate_review.py` éªŒæ”¶è„šæœ¬

---

## Phase 4: é€šç”¨æ¨¡æ¿è¯­æ–™

### 4.1 ç›®æ ‡
ä»ç°æœ‰è¯­æ–™ä¸­æå–é€šç”¨æ¨¡æ¿ï¼Œä¾›æ–°å•†å®¶å¿«é€Ÿå¯åŠ¨ã€‚

### 4.2 é€šç”¨è¯­æ–™åˆ†ç±»æ ‡å‡†

```python
# é€šç”¨è¯­æ–™åˆ¤æ–­æ ‡å‡†
UNIVERSAL_CRITERIA = {
    # å¯ä½œä¸ºé€šç”¨æ¨¡æ¿çš„ç±»åˆ«
    "universal_categories": [
        "general",           # ä¸€èˆ¬æ€§é—®é¢˜ï¼ˆå’ŒæœçŸ¥è¯†ã€æ–‡åŒ–ç­‰ï¼‰
        "size_style",        # å°ºå¯¸æ¬¾å¼ï¼ˆé€šç”¨éƒ¨åˆ†ï¼‰
        "photo",             # æ‘„å½±ç›¸å…³ï¼ˆé€šç”¨éƒ¨åˆ†ï¼‰
    ],

    # éœ€è¦å•†å®¶å®šåˆ¶çš„ç±»åˆ«
    "tenant_specific": [
        "pricing",           # ä»·æ ¼ï¼ˆæ¯å®¶ä¸åŒï¼‰
        "booking",           # é¢„çº¦ï¼ˆæµç¨‹å¯èƒ½ä¸åŒï¼‰
        "location",          # åœ°ç‚¹ï¼ˆæ¯å®¶ä¸åŒï¼‰
        "return_policy",     # å½’è¿˜æ”¿ç­–ï¼ˆæ¯å®¶ä¸åŒï¼‰
    ],

    # é€šç”¨è¯­æ–™å…³é”®è¯
    "universal_keywords": [
        "å’Œæœæ˜¯ä»€ä¹ˆ", "å’Œæœã®ç¨®é¡", "what is kimono",
        "å°ºå¯¸æ€ä¹ˆé€‰", "ã‚µã‚¤ã‚ºé¸ã³", "how to choose size",
        "ç©¿å’Œæœæ³¨æ„äº‹é¡¹", "ç€ç‰©ã®ç€æ–¹", "how to wear",
        # ...
    ],

    # éœ€æ’é™¤çš„è¯ï¼ˆè¡¨æ˜æ˜¯ç‰¹å®šå•†å®¶ï¼‰
    "exclude_keywords": [
        "æˆ‘ä»¬åº—", "å½“åº—", "our shop",
        "ä½äº", "ã€’", "address",
        "ä»·æ ¼", "æ–™é‡‘", "price", "å††", "æ—¥å…ƒ",
        # ...
    ]
}
```

### 4.3 è¯­æ–™æå–æµç¨‹

```
ç°æœ‰è¯­æ–™ (3754æ¡)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†ç±»è¿‡æ»¤       â”‚
â”‚  - æŒ‰ç±»åˆ«ç­›é€‰   â”‚
â”‚  - å…³é”®è¯åŒ¹é…   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å»å•†å®¶ç‰¹å¾     â”‚
â”‚  - ç§»é™¤åº—å    â”‚
â”‚  - ç§»é™¤åœ°å€    â”‚
â”‚  - ç§»é™¤ä»·æ ¼    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è´¨é‡è¯„ä¼°       â”‚
â”‚  - å®Œæ•´æ€§æ£€æŸ¥   â”‚
â”‚  - é€šç”¨æ€§è¯„åˆ†   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äººå·¥å®¡æ ¸       â”‚
â”‚  - æœ€ç»ˆç¡®è®¤     â”‚
â”‚  - è°ƒæ•´ä¼˜åŒ–     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
é€šç”¨æ¨¡æ¿è¯­æ–™ (é¢„è®¡ 500-800 æ¡)
```

### 4.4 æ–°å•†å®¶åˆå§‹åŒ–æµç¨‹

```python
def initialize_new_tenant(tenant_id: str, tenant_name: str):
    """æ–°å•†å®¶åˆå§‹åŒ–"""

    # 1. åˆ›å»ºå•†å®¶è®°å½•
    tenant = create_tenant(tenant_id, tenant_name)

    # 2. åˆ†é… Pinecone namespace
    namespace = f"tenant_{tenant_id}"

    # 3. å¤åˆ¶é€šç”¨æ¨¡æ¿è¯­æ–™
    template_qa_pairs = get_universal_templates()

    # 4. ä¸Šä¼ åˆ°å•†å®¶ä¸“å± namespace
    upload_to_pinecone(template_qa_pairs, namespace)

    # 5. è®°å½•åˆ°æ•°æ®åº“
    for qa in template_qa_pairs:
        create_qa_pair(
            tenant_id=tenant_id,
            question=qa.question,
            answer=qa.answer,
            source="template",
            is_synced=True
        )

    return {
        "tenant_id": tenant_id,
        "namespace": namespace,
        "initial_qa_count": len(template_qa_pairs)
    }
```

### 4.5 Gate 4 Review éªŒæ”¶æ ‡å‡†

| ID | æ£€æŸ¥é¡¹ | éªŒæ”¶æ ‡å‡† |
|----|--------|----------|
| P4.1 | è¯­æ–™åˆ†æ | å®Œæˆç°æœ‰è¯­æ–™çš„é€šç”¨æ€§åˆ†ææŠ¥å‘Š |
| P4.2 | æ¨¡æ¿æå– | æå– 500+ æ¡é€šç”¨æ¨¡æ¿è¯­æ–™ |
| P4.3 | è´¨é‡éªŒè¯ | æ¨¡æ¿è¯­æ–™é€šè¿‡è´¨é‡æ£€æŸ¥ |
| P4.4 | åˆå§‹åŒ– API | æ–°å•†å®¶åˆå§‹åŒ– API å¯ç”¨ |
| P4.5 | æ¨¡æ¿å¤åˆ¶ | é€šç”¨è¯­æ–™æ­£ç¡®å¤åˆ¶åˆ°æ–°å•†å®¶ namespace |
| P4.6 | éš”ç¦»éªŒè¯ | æ–°å•†å®¶ä¿®æ”¹ä¸å½±å“æ¨¡æ¿ |

### 4.6 äº¤ä»˜ç‰©
- è¯­æ–™åˆ†ææŠ¥å‘Š
- é€šç”¨æ¨¡æ¿è¯­æ–™åº“
- å•†å®¶åˆå§‹åŒ–æœåŠ¡
- `scripts/phase4_gate_review.py` éªŒæ”¶è„šæœ¬

---

## Phase 5: å®¢æœç•Œé¢ä¼˜åŒ–

### 5.1 ç›®æ ‡
ä¼˜åŒ–å®¢æœå·¥ä½œç•Œé¢ï¼Œæ”¯æŒå¤šå®¢æœååŒï¼Œæ·»åŠ è¯­æ–™ç®¡ç†åŠŸèƒ½ã€‚

### 5.2 ç•Œé¢åŠŸèƒ½æ¸…å•

#### 5.2.1 å®¢æœå·¥ä½œå°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kimono AI å®¢æœåŠ©æ‰‹                    [å•†å®¶åç§°] [å®¢æœå§“å] â–¼  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     å¯¹è¯åŒºåŸŸ                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ å®¢æˆ·: è¯·é—®å’Œæœç§Ÿèµä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ                    â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ AI: æˆ‘ä»¬çš„å’Œæœç§Ÿèµä»·æ ¼ä» 6,000 æ—¥å…ƒèµ·...        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ [æ¥æº: 3æ¡åŒ¹é…] [ç½®ä¿¡åº¦: 85%] [æ¨¡å‹: qwen-plus]  â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚  ğŸ‘ é‡‡çº³   ğŸ‘ ä¸å¥½   âœï¸ ç¼–è¾‘åé‡‡çº³          â”‚  â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è¾“å…¥å®¢æˆ·é—®é¢˜...                              [å‘é€]     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [æ–°å¯¹è¯] [å¿«æ·é—®é¢˜] [å†å²è®°å½•] [è¯­æ–™ç®¡ç†]                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.2 è¯­æ–™ç®¡ç†åå°ï¼ˆå•†å®¶ç®¡ç†å‘˜ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯­æ–™ç®¡ç†                                          [è¿”å›å·¥ä½œå°] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [è¯­æ–™åˆ—è¡¨] [å¾…å®¡æ ¸] [æ·»åŠ è¯­æ–™] [å¯¼å…¥/å¯¼å‡º] [ç»Ÿè®¡]              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æœç´¢: [________________] åˆ†ç±»: [å…¨éƒ¨ â–¼] [æœç´¢]         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–¡ | é—®é¢˜                    | åˆ†ç±»   | è´¨é‡ | æ“ä½œ      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â–¡ | å’Œæœç§Ÿèµä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ    | ä»·æ ¼   | 92%  | ç¼–è¾‘ åˆ é™¤ â”‚   â”‚
â”‚  â”‚ â–¡ | æœ‰å“ªäº›å°ºå¯¸å¯ä»¥é€‰æ‹©ï¼Ÿ    | å°ºå¯¸   | 88%  | ç¼–è¾‘ åˆ é™¤ â”‚   â”‚
â”‚  â”‚ â–¡ | éœ€è¦æå‰é¢„çº¦å—ï¼Ÿ        | é¢„çº¦   | 95%  | ç¼–è¾‘ åˆ é™¤ â”‚   â”‚
â”‚  â”‚ ...                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  æ˜¾ç¤º 1-20 / å…± 1,234 æ¡          [< ä¸Šä¸€é¡µ] [1] [2] [>]       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å¤šå®¢æœååŒè®¾è®¡

```python
# åŒä¸€å•†å®¶å¤šå®¢æœåŒæ—¶åœ¨çº¿
# å¯¹è¯éš”ç¦»ï¼šæ¯ä¸ªå®¢æœçš„å¯¹è¯ç‹¬ç«‹
# è¯­æ–™å…±äº«ï¼šæ‰€æœ‰å®¢æœå…±äº«å•†å®¶è¯­æ–™åº“
# åé¦ˆæ±‡æ€»ï¼šæ‰€æœ‰å®¢æœçš„åé¦ˆç»Ÿä¸€æ”¶é›†

class SessionManager:
    """å®¢æœä¼šè¯ç®¡ç†"""

    def create_session(self, user_id: str, tenant_id: str):
        """åˆ›å»ºå®¢æœå·¥ä½œä¼šè¯"""
        return {
            "session_id": generate_session_id(),
            "user_id": user_id,
            "tenant_id": tenant_id,
            "conversations": [],      # è¯¥å®¢æœçš„å¯¹è¯åˆ—è¡¨
            "created_at": now()
        }
```

### 5.4 Gate 5 Review éªŒæ”¶æ ‡å‡†

| ID | æ£€æŸ¥é¡¹ | éªŒæ”¶æ ‡å‡† |
|----|--------|----------|
| P5.1 | ç™»å½•é¡µé¢ | å®¢æœå¯ç™»å½•ï¼Œæ˜¾ç¤ºæ‰€å±å•†å®¶ |
| P5.2 | å·¥ä½œå° | å®Œæ•´çš„å¯¹è¯å’Œåé¦ˆç•Œé¢ |
| P5.3 | ç¼–è¾‘ç­”æ¡ˆ | æ”¯æŒç¼–è¾‘ AI å›ç­”åé‡‡çº³ |
| P5.4 | å†å²è®°å½• | å¯æŸ¥çœ‹å†å²å¯¹è¯ |
| P5.5 | è¯­æ–™ç®¡ç† | ç®¡ç†å‘˜å¯æŸ¥çœ‹/ç¼–è¾‘è¯­æ–™ |
| P5.6 | å¤šå®¢æœ | å¤šå®¢æœåŒæ—¶ä½¿ç”¨äº’ä¸å½±å“ |
| P5.7 | å“åº”å¼ | ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½ |

### 5.5 äº¤ä»˜ç‰©
- å®Œæ•´çš„å®¢æœå·¥ä½œå°ç•Œé¢
- è¯­æ–™ç®¡ç†åå°
- å¤šå®¢æœä¼šè¯ç®¡ç†
- `scripts/phase5_gate_review.py` éªŒæ”¶è„šæœ¬

---

## Phase 6: ç”Ÿäº§éƒ¨ç½²å‡†å¤‡

### 6.1 ç›®æ ‡
å®Œæˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‡†å¤‡ï¼ŒåŒ…æ‹¬æ€§èƒ½ä¼˜åŒ–ã€ç›‘æ§å’Œè¿ç»´å·¥å…·ã€‚

### 6.2 éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”Ÿäº§ç¯å¢ƒæ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    è´Ÿè½½å‡è¡¡ / CDN                        â”‚  â”‚
â”‚   â”‚                  (Cloudflare / Nginx)                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                           â–¼                              â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚   API 1     â”‚   â”‚   API 2     â”‚   â”‚   API N     â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  (FastAPI)  â”‚   â”‚  (FastAPI)  â”‚   â”‚  (FastAPI)  â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â”‚          â”‚                 â”‚                 â”‚           â”‚  â”‚
â”‚   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚   â”‚                            â”‚                              â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚   â”‚                        â–¼                         â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â”‚              PostgreSQL                  â”‚   â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â”‚         (ä¸»ä»å¤åˆ¶ + è‡ªåŠ¨å¤‡ä»½)             â”‚   â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â”‚
â”‚   â”‚   â”‚                                                  â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â”‚               Redis                      â”‚   â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â”‚         (ä¼šè¯ç¼“å­˜ + é€Ÿç‡é™åˆ¶)             â”‚   â”‚    â”‚  â”‚
â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚   â”‚                                                           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     å¤–éƒ¨æœåŠ¡                             â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚  Pinecone   â”‚   â”‚  DashScope  â”‚   â”‚  ç›‘æ§å‘Šè­¦   â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  å‘é‡æ•°æ®åº“  â”‚   â”‚  Qwen LLM   â”‚   â”‚ (Prometheus)â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 æ€§èƒ½ä¼˜åŒ–

| ä¼˜åŒ–é¡¹ | æªæ–½ | ç›®æ ‡ |
|-------|------|------|
| å‘é‡æœç´¢ | ç»“æœç¼“å­˜ (Redis) | é‡å¤æŸ¥è¯¢ < 50ms |
| æ•°æ®åº“ | è¿æ¥æ±  + è¯»å†™åˆ†ç¦» | æ”¯æŒ 100+ å¹¶å‘ |
| API å“åº” | Gzip å‹ç¼© | å‡å°‘ 60% ä¼ è¾“ |
| é™æ€èµ„æº | CDN åŠ é€Ÿ | å…¨çƒè®¿é—® < 200ms |

### 6.4 ç›‘æ§å’Œå‘Šè­¦

```python
# ç›‘æ§æŒ‡æ ‡
METRICS = {
    "api": [
        "request_count",           # è¯·æ±‚æ•°
        "response_time_p95",       # P95 å“åº”æ—¶é—´
        "error_rate",              # é”™è¯¯ç‡
    ],
    "business": [
        "daily_conversations",     # æ¯æ—¥å¯¹è¯æ•°
        "feedback_positive_rate",  # æ­£åé¦ˆç‡
        "qa_sync_status",          # è¯­æ–™åŒæ­¥çŠ¶æ€
    ],
    "system": [
        "cpu_usage",
        "memory_usage",
        "disk_usage",
    ]
}

# å‘Šè­¦è§„åˆ™
ALERTS = {
    "high_error_rate": "error_rate > 5%",
    "slow_response": "response_time_p95 > 3s",
    "low_positive_feedback": "feedback_positive_rate < 60%",
}
```

### 6.5 Gate 6 Review éªŒæ”¶æ ‡å‡†

| ID | æ£€æŸ¥é¡¹ | éªŒæ”¶æ ‡å‡† |
|----|--------|----------|
| P6.1 | æ•°æ®åº“è¿ç§» | PostgreSQL éƒ¨ç½²æ­£å¸¸ |
| P6.2 | æ•°æ®å¤‡ä»½ | æ¯æ—¥è‡ªåŠ¨å¤‡ä»½ï¼Œå¯æ¢å¤ |
| P6.3 | æ€§èƒ½æµ‹è¯• | æ”¯æŒ 100 å¹¶å‘ï¼ŒP95 < 2s |
| P6.4 | ç›‘æ§éƒ¨ç½² | å…³é”®æŒ‡æ ‡å¯è§†åŒ– |
| P6.5 | å‘Šè­¦é…ç½® | å¼‚å¸¸æƒ…å†µåŠæ—¶é€šçŸ¥ |
| P6.6 | å®‰å…¨å®¡è®¡ | æ— é«˜å±æ¼æ´ |
| P6.7 | æ–‡æ¡£å®Œæ•´ | éƒ¨ç½²å’Œè¿ç»´æ–‡æ¡£é½å…¨ |

### 6.6 äº¤ä»˜ç‰©
- Docker éƒ¨ç½²é…ç½®
- æ•°æ®åº“è¿ç§»è„šæœ¬
- ç›‘æ§ Dashboard
- è¿ç»´æ–‡æ¡£
- `scripts/phase6_gate_review.py` éªŒæ”¶è„šæœ¬

---

## å¼€å‘èµ„æº

### Linode VPS (å¼€å‘/æµ‹è¯•)
- **é…ç½®**: 2 CPU / 4GB RAM / 80GB Storage
- **ç”¨é€”**: å¼€å‘æµ‹è¯•ç¯å¢ƒ
- **éƒ¨ç½²å†…å®¹**:
  - FastAPI åº”ç”¨
  - SQLite æ•°æ®åº“
  - Nginx åå‘ä»£ç†

### AWS (ç”Ÿäº§ç¯å¢ƒ)
- **éƒ¨ç½²æ–¹æ¡ˆ**: EC2 / ECS / Lambda (å¾…å®š)
- **æ•°æ®åº“**: RDS PostgreSQL
- **ç¼“å­˜**: ElastiCache Redis
- **å­˜å‚¨**: S3 (å¤‡ä»½)

### å¹³å°é›†æˆ
- **é›†æˆæ–¹å¼**: åµŒå…¥åˆ°æ’®åˆäº¤æ˜“å¹³å°
- **è´¦å·ä½“ç³»**: å…±äº«å¹³å°ç”¨æˆ·ç³»ç»Ÿï¼ˆSSO/API å¯¹æ¥ï¼‰
- **æƒé™æ˜ å°„**: å¹³å°å•†å®¶ â†’ AIå®¢æœå•†å®¶ï¼Œå¹³å°å‘˜å·¥ â†’ AIå®¢æœå®¢æœ

### è¯­æ–™å®¡æ ¸ç­–ç•¥
- **å®¡æ ¸æ¨¡å¼**: è‡ªåŠ¨åº”ç”¨ + å®šæœŸäººå·¥æŠ½æŸ¥
- **è‡ªåŠ¨åº”ç”¨**: å®¢æœæäº¤çš„çº åç­”æ¡ˆç›´æ¥ç”Ÿæ•ˆ
- **æŠ½æŸ¥æœºåˆ¶**: å®šæœŸå¯¼å‡ºå®¡æ ¸æŠ¥å‘Šï¼Œäººå·¥æŠ½æŸ¥è´¨é‡

### å¤–éƒ¨æœåŠ¡
| æœåŠ¡ | ç”¨é€” | ç¯å¢ƒ |
|-----|------|------|
| Pinecone | å‘é‡æ•°æ®åº“ | å¼€å‘/ç”Ÿäº§å…±ç”¨ |
| DashScope | Qwen LLM | å¼€å‘/ç”Ÿäº§å…±ç”¨ |
| GitHub | ä»£ç ä»“åº“ | - |
| å¹³å° API | ç”¨æˆ·è®¤è¯ | ç”Ÿäº§ç¯å¢ƒ |

---

## é™„å½•

### A. æŠ€æœ¯æ ˆæ€»ç»“

| å±‚æ¬¡ | æŠ€æœ¯ |
|-----|------|
| å‰ç«¯ | Alpine.js + Tailwind CSS |
| åç«¯ | FastAPI + Python 3.11+ |
| æ•°æ®åº“ | SQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§) |
| ORM | SQLAlchemy |
| å‘é‡åº“ | Pinecone |
| LLM | Qwen (via DashScope) |
| è®¤è¯ | JWT |
| éƒ¨ç½² | Docker + Nginx |

### B. æ–‡ä»¶ç»“æ„ï¼ˆæœ€ç»ˆï¼‰

```
kimono_ai_customer_service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ routes.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ dependencies.py
â”‚   â”‚   â””â”€â”€ auth/                    # æ–°å¢ï¼šè®¤è¯æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ jwt.py
â”‚   â”‚       â””â”€â”€ permissions.py
â”‚   â”œâ”€â”€ database/                    # æ–°å¢ï¼šæ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ connection.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”œâ”€â”€ knowledge/
â”‚   â”œâ”€â”€ rag/
â”‚   â”œâ”€â”€ services/                    # æ–°å¢ï¼šä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ tenant_service.py
â”‚   â”‚   â”œâ”€â”€ feedback_service.py
â”‚   â”‚   â””â”€â”€ learning_service.py
â”‚   â””â”€â”€ static/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ phase1_gate_review.py
â”‚   â”œâ”€â”€ phase2_gate_review.py
â”‚   â”œâ”€â”€ phase3_gate_review.py
â”‚   â”œâ”€â”€ phase4_gate_review.py
â”‚   â”œâ”€â”€ phase5_gate_review.py
â”‚   â””â”€â”€ phase6_gate_review.py
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ templates/                   # æ–°å¢ï¼šé€šç”¨æ¨¡æ¿è¯­æ–™
â”‚   â””â”€â”€ processed/
â”œâ”€â”€ docs/
â”œâ”€â”€ docker/                          # æ–°å¢ï¼šDocker é…ç½®
â””â”€â”€ tests/
```

### C. é‡Œç¨‹ç¢‘æ—¶é—´çº¿

```
Phase 1 â”€â”€â–º Phase 2 â”€â”€â–º Phase 3 â”€â”€â–º Phase 4 â”€â”€â–º Phase 5 â”€â”€â–º Phase 6
æ•°æ®æŒä¹…åŒ–   å¤šç§Ÿæˆ·      è¯­æ–™å­¦ä¹     é€šç”¨æ¨¡æ¿    ç•Œé¢ä¼˜åŒ–    ç”Ÿäº§éƒ¨ç½²
   â”‚          â”‚           â”‚          â”‚          â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        æŒç»­è¿­ä»£ä¼˜åŒ–
```

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*
*åˆ›å»ºæ—¥æœŸ: 2024-12*
*æœ€åæ›´æ–°: 2024-12*
